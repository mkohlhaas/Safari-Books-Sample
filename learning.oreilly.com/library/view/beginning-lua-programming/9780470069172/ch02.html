<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/beginning-lua-programming/9780470069172/ch02.html"
data-csrf-cookie="csrfsafari"


  data-user-id="11366403"
  data-user-uuid="ce47de5b-ce80-49f0-b5cd-c60d3d33b198"
  data-username="michaelschiner"
  data-account-type="Trial"
  
  data-activated-trial-date="05/13/2021"


  data-archive="9780470069172"
  data-publishers="Wrox"



  data-htmlfile-name="ch02.html"
  data-epub-title="Beginning Lua Programming" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/beginning-lua-programming/9780470069172/ch02.html"
data-csrf-cookie="csrfsafari"


  data-user-id="11366403"
  data-user-uuid="ce47de5b-ce80-49f0-b5cd-c60d3d33b198"
  data-username="michaelschiner"
  data-account-type="Trial"
  
  data-activated-trial-date="05/13/2021"


  data-archive="9780470069172"
  data-publishers="Wrox"



  data-htmlfile-name="ch02.html"
  data-epub-title="Beginning Lua Programming" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="O'Reilly Media" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780470069172"/><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico" /><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>2. First Steps - Beginning Lua Programming</title><link rel="stylesheet" href="https://learning.oreilly.com/static/CACHE/css/output.5bdb4fcb2aad.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://learning.oreilly.com/static/css/annotator.e3b0c44298fc.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book"></style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9780470069172/chapter/ch02.html",
          "book_id": "9780470069172",
          "chapter_uri": "ch02.html",
          "position": 0,
          "user_uuid": "ce47de5b-ce80-49f0-b5cd-c60d3d33b198",
          "next_chapter_uri": "/library/view/beginning-lua-programming/9780470069172/ch03.html"
        
      },
      title: "Beginning Lua Programming",
      author_list: "Aaron Brown, Kurt Jung",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="https://learning.oreilly.com/static/js/src/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
        }
      };
  </script><link rel="canonical" href="ch02.html"/><meta name="description" content="Chapter 2. First Steps This chapter and the next two lay the foundation you need to understand the rest of the book. As such, they cover a great deal of ... "><meta property="og:title" content="2. First Steps" /><meta itemprop="isPartOf" content="/library/view/beginning-lua-programming/9780470069172/" /><meta itemprop="name" content="2. First Steps" /><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/ch02.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9780470069172/" /><meta property="og:description" itemprop="description" content="Chapter 2. First Steps This chapter and the next two lay the foundation you need to understand the rest of the book. As such, they cover a great deal of ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="Wrox" /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9780470069172" /><meta property="og:book:author" itemprop="author" content="Aaron Brown" /><meta property="og:book:author" itemprop="author" content="Kurt Jung" /><meta property="og:book:tag" itemprop="about" content="Core Programming" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@OReillyMedia"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; URL=https://learning.oreilly.com/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = 'ce47de5b-ce80-49f0-b5cd-c60d3d33b198';
      dataLayer.push({userIdentifier: 'ce47de5b-ce80-49f0-b5cd-c60d3d33b198'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = '29964b7b-68d8-4532-9a9b-32e089689c1f';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer src="https://learning.oreilly.com/static/js/build/vendor.0eac897f11ed.js"></script><script defer src="https://learning.oreilly.com/static/js/build/reader.c745ea9296ac.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  <noscript> 
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="ch02.html#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z" /></svg><span>Home</span></a></li><li class="search"><a href="ch02.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="ch02.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a
                href="ch02.html#"
                class="l1 nav-icn "
                
              ><?xml version="1.0" encoding="UTF-8"?><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O&#39;Reilly</span></a><ul class="flyout"><li><a
                    href="https://learning.oreilly.com/profile/"
                    class="l2 nav-icn"
                    
                  ><span>Profile</span></a></li><li><a
                    href="https://learning.oreilly.com/history/"
                    class="l2 nav-icn"
                    
                  ><span>History</span></a></li><li><a
                    href="https://learning.oreilly.com/playlists/"
                    class="l2 nav-icn"
                    
                  ><span>Playlists</span></a></li><li><a
                    href="https://learning.oreilly.com/u/ce47de5b-ce80-49f0-b5cd-c60d3d33b198/"
                    class="l2 nav-icn"
                    
                  ><span>Highlights</span></a></li></ul></li><li ><a
                href="https://learning.oreilly.com/answers/"
                class="l1 nav-icn "
                
              ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2.31032699,3.75609006 C4.65421571,1.41371359 8.45302454,1.41472092 10.7955702,3.75860838 C13.1381158,6.10249583 13.1369405,9.90130261 10.7930518,12.243847 C8.44916311,14.5863913 4.65018639,14.5852161 2.30780867,12.2413286 C-0.0346204845,9.89749489 -0.0334929936,6.09853298 2.31032699,3.75609006 Z M8.8198605,4.98016308 C7.34193969,3.86924672 5.23410194,3.98609692 3.88914868,5.33104946 C3.12814393,6.09032122 2.72818176,7.13880077 2.79015179,8.21201133 C2.79115912,8.23064692 2.79233434,8.24928252 2.79350956,8.26791811 L2.79350956,8.26791811 C2.83179539,8.8307976 2.9944077,9.37404287 3.26947292,9.86201677 L3.26947292,9.86201677 L2.77621706,11.7027432 C2.7699968,11.7259241 2.77662063,11.7506624 2.79359185,11.7676337 C2.8105631,11.7846049 2.83530144,11.7912287 2.85848233,11.7850085 L2.85848233,11.7850085 L4.69400524,11.2922565 C5.26306363,11.6167344 5.90703177,11.786885 6.56209849,11.7858479 C8.64827865,11.7858479 10.3395879,10.094542 10.3395879,8.00836292 C10.3405204,6.84135608 9.80105674,5.73967784 8.87862141,5.02482134 L8.87862141,5.02482134 L8.82825492,4.98654283 Z M13.7933062,2 C14.7073496,2.00009863 15.4482759,2.74110484 15.4482759,3.65514822 C15.4482759,4.32460943 15.0449926,4.92814782 14.4264842,5.18432286 C13.8079757,5.44049789 13.096053,5.29885769 12.6226979,4.82545158 C12.1493429,4.35204547 12.0077795,3.64010743 12.2640213,3.02162665 C12.5202631,2.40314587 13.123845,1.99992776 13.7933062,2 Z"/></svg><span>Answers</span></a></li><li class="flyout-parent"><a
                href="ch02.html#"
                class="l1 nav-icn "
                
              ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"/></g></svg><span>Explore</span></a><ul class="flyout"><li><a
                    href="https://learning.oreilly.com/topics/"
                    class="l2 nav-icn"
                    
                  ><span>All Topics</span></a></li><li><a
                    href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert"
                    class="l2 nav-icn"
                    
                  ><span>Most Popular Titles</span></a></li><li><a
                    href="https://learning.oreilly.com/recommendations/"
                    class="l2 nav-icn"
                    
                  ><span>Recommended</span></a></li><li><a
                    href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0"
                    class="l2 nav-icn"
                    
                  ><span>Early Releases</span></a></li><li><a
                    href="https://learning.oreilly.com/playlists/discover/"
                    class="l2 nav-icn"
                    
                  ><span>Shared Playlists</span></a></li><li><a
                    href="https://learning.oreilly.com/resource-centers/"
                    class="l2 nav-icn"
                    
                  ><span>Resource Centers</span></a></li></ul></li><li class="flyout-parent"><a
                href="ch02.html#"
                class="l1 nav-icn "
                
              ><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12.8 3.2A1.2 1.2 0 0 1 14 4.4v8.4a1.2 1.2 0 0 1-1.2 1.2H3.2A1.2 1.2 0 0 1 2 12.8V4.4a1.2 1.2 0 0 1 1.2-1.2h1.2V2h1.2v1.2h4.8V2h1.2v1.2h1.2zm-9.6 9.6h9.6V6.2H3.2v6.6zM8 9.5a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7zm2.7 2.148v.552H5.3v-.552c0-.321.124-.634.355-.858a3.358 3.358 0 0 1 4.69 0c.23.224.355.537.355.858z" /></svg><span>Live Events</span></a><ul class="flyout"><li><a
                    href="https://learning.oreilly.com/attend/"
                    class="l2 nav-icn"
                    
                  ><span>All Events</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/architectural-katas/"
                    class="l2 nav-icn"
                    
                  ><span>Architectural Katas</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/ai/"
                    class="l2 nav-icn"
                    
                  ><span>AI &amp; ML</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/strata/"
                    class="l2 nav-icn"
                    
                  ><span>Data Sci &amp; Eng</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/oscon/"
                    class="l2 nav-icn"
                    
                  ><span>Programming</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/infrastructure-ops/"
                    class="l2 nav-icn"
                    
                  ><span>Infra &amp; Ops</span></a></li><li><a
                    href="https://learning.oreilly.com/featured/software-architecture/"
                    class="l2 nav-icn"
                    
                  ><span>Software Arch</span></a></li></ul></li><li class="flyout-parent"><a
                href="ch02.html#"
                class="l1 nav-icn "
                
              ><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Interactive</span></a><ul class="flyout"><li><a
                    href="https://learning.oreilly.com/scenarios/?classification=content-scenario"
                    class="l2 nav-icn"
                    
                  ><span>Scenarios</span></a></li><li><a
                    href="https://learning.oreilly.com/scenarios/?classification=sandbox-scenario"
                    class="l2 nav-icn"
                    
                  ><span>Sandboxes</span></a></li><li><a
                    href="https://learning.oreilly.com/interactive/?classification=jupyter-notebook"
                    class="l2 nav-icn"
                    
                  ><span>Jupyter Notebooks</span></a></li></ul></li><li ><a
                href="https://learning.oreilly.com/certifications/"
                class="l1 nav-icn "
                
              ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"/></svg><span>Certifications</span></a></li><li ><a
                href="https://learning.oreilly.com/preferences/"
                class="l1 nav-icn "
                
              ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li ><a
                href="https://learning.oreilly.com/public/support/"
                class="l1 nav-icn "
                
              ><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z" /></svg><span>Support</span></a></li><li ><a
                href="https://get.oreilly.com/email-signup.html"
                class="l1 nav-icn "
                target=&quot;_blank&quot;
              ><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z" /></svg><span>Newsletters</span></a></li><li ><a
                href="https://learning.oreilly.com/accounts/logout/"
                class="l1 nav-icn "
                
              ><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z" /></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="ch02.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Beginning Lua Programming
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="ch02.html#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track('SearchBook_HeronBook')"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9780470069172/chapter/ch02.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track('AddPlaylist_HeronBook')"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="ch02.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track('ChangeFont_HeronBook')"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="ch02.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track('Share_HeronBook')"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/ch02.html&text=Beginning%20Lua%20Programming&via=OReillyMedia"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/ch02.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/ch02.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: 2.%20First%20Steps&body=https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/ch02.html%0D%0Afrom Beginning%20Lua%20Programming%0D%0A"
      ><span>Email</span></a></li></ul></li><!-- endif request.user.is_authenticated -->
      </ul>
    </div>

      
          
      

    <section role="document">
        
        




  <script defer src="https://learning.oreilly.com/static/js/build/djangoMessagesPage.bfaca9fd8619.js"></script>


        <script src="https://fast.appcues.com/48743.js"></script>
<script>
  var userId = "ce47de5b-ce80-49f0-b5cd-c60d3d33b198";

  var userObject = {
    firstName: "Michael",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "2021-05-13",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Getting Situated</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. Extending Lua with Functions</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="first_steps"></a>Chapter 2. First Steps</h1></div></div></div><p>This chapter and the next two lay the foundation you need to understand the rest of the book. As such, they cover a great deal of material, although they're still very basic. If you've never programmed before, you'll learn a lot of new concepts; if you're an experienced programmer, you'll see a lot of things that you already know. In the latter case, you are encouraged to skim, but be warned: Some of the Lua building blocks covered in these three chapters may have no counterpart in the languages you are familiar with.<a id="IDX-CHP-2-0001" class="indexterm"></a></p><p>This chapter explains the:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Arithmetic operations</p></li><li class="listitem"><p>Variables and assignment</p></li><li class="listitem"><p>Strings</p></li><li class="listitem"><p><span class="emphasis"><em>true, false</em></span>, and <span class="emphasis"><em>nil</em></span> values</p></li><li class="listitem"><p><span class="emphasis"><em>if</em></span> statements and <span class="emphasis"><em>while, for</em></span>, and <span class="emphasis"><em>repeat</em></span> loops</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="numbers_and_arithmetic_operations_colon"></a>Numbers and Arithmetic Operations: Basic Interpreter Usage</h1></div></div></div><p>The Lua interpreter—<code class="literal">lua</code>—is a program that can execute Lua code that you type right after you type it.</p><div class="blockquote"><blockquote class="blockquote"><p>This is how the term <span class="emphasis"><em>interpreter</em></span> is used in this chapter, but it can also refer to a particular internal component of the Lua implementation—more on this in the next chapter and <a class="link" href="ch10.html" title="Chapter 10. Looking Under the Hood">Chapter 10</a>.</p></blockquote></div><p>In this section, you explore the basics of using <code class="literal">lua</code>.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="addition_comma_subtraction_comma_multipl"></a>Addition, Subtraction, Multiplication, Division, and Exponentiation</h2></div></div></div><p>Start with something simple—adding two and two. Access your system's shell, as described in <a class="link" href="ch01.html" title="Chapter 1. Getting Situated">Chapter 1</a>. When you're there, type <span class="strong"><strong>lua</strong></span> and press Enter (Return on some keyboards). You should see something like the following:<a id="IDX-CHP-2-0002" class="indexterm"></a><a id="IDX-CHP-2-0003" class="indexterm"></a><a id="IDX-CHP-2-0004" class="indexterm"></a><a id="IDX-CHP-2-0005" class="indexterm"></a><a id="IDX-CHP-2-0006" class="indexterm"></a><a id="IDX-CHP-2-0007" class="indexterm"></a><a id="IDX-CHP-2-0008" class="indexterm"></a></p><pre class="programlisting">Lua 5.1.1 Copyright (C) 1994-2006 Lua.org, PUC-Rio
&gt;</pre><p>Typing <code class="literal">lua</code> starts the Lua interpreter. When it starts, it prints its version number and copyright information, and then it prints the following:</p><pre class="programlisting">&gt;</pre><p>This Lua prompt tells you it's waiting for you to give it something to do.</p><p>Now type the following (the part you type is <span class="strong"><strong>bold</strong></span>):</p><pre class="programlisting">&gt; <strong class="userinput"><code>print(2 + 2)</code></strong></pre><p>Then press Enter. You should see the following:</p><pre class="programlisting">4
&gt;</pre><p>Lua looked between the parentheses, saw <code class="literal">2 + 2</code>, added two and two, and followed the <code class="literal">print</code> command and output the result to the screen. It then displayed another prompt to tell you it was ready for more.</p><p>Lua can handle subtraction, negative numbers, numbers with decimal points, multiplication (using <code class="literal">*</code>), division (using <code class="literal">/</code>), exponentiation (using <code class="literal">^</code>), and combinations of these. Here are some examples:<a id="IDX-CHP-2-0009" class="indexterm"></a><a id="IDX-CHP-2-0010" class="indexterm"></a><a id="IDX-CHP-2-0011" class="indexterm"></a><a id="IDX-CHP-2-0012" class="indexterm"></a><a id="IDX-CHP-2-0013" class="indexterm"></a><a id="IDX-CHP-2-0014" class="indexterm"></a><a id="IDX-CHP-2-0015" class="indexterm"></a><a id="IDX-CHP-2-0016" class="indexterm"></a></p><pre class="programlisting">&gt;
print(2 - 2)
0
&gt; print(-2 + −2)
-4
&gt; print(2.5 + 2.75)
5.25
&gt; print(3 * 3)
9
&gt; print(100 / 4)
25
&gt; print(3 ^ 2)
9
&gt; print(5 * −5 + 1 + 1 + 0.5)
-22.5</pre></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="interacting_with_the_interpreter"></a>Interacting with the Interpreter</h2></div></div></div><p>The interpreter knows how to respond when you type Lua code that either contains a mistake or is incomplete. Sooner or later, you'll type something that makes no sense to Lua. In case you haven't already done this accidentally, now is the time to do it on purpose to see what happens. Type <span class="strong"><strong>print (2 + + 2)</strong></span> and press Enter. Here's what you get:<a id="IDX-CHP-2-0017" class="indexterm"></a><a id="IDX-CHP-2-0018" class="indexterm"></a><a id="IDX-CHP-2-0019" class="indexterm"></a></p><pre class="programlisting">&gt; print(2 + + 2)
stdin:1: unexpected symbol near '+'
&gt;</pre><p>Lua sees something that doesn't make sense (two plus signs next to each other), so it prints a short explanation of why it doesn't make sense. The explanation is also known as an <span class="emphasis"><em>error message</em></span>.</p><p>Because Lua is only a computer program, its explanations aren't always easy to understand at first, but this one (<code class="literal">unexpected symbol nea</code>r<code class="literal">'+'</code>) is fairly straightforward. Next to a plus sign, Lua found something it wasn't expecting—in this case another plus sign.</p><p>After printing the error message, Lua displayed another prompt to let you know it was ready for more.</p><p>You'll get similar error messages if you leave out <code class="literal">print</code> or its parentheses, like this:</p><pre class="programlisting">&gt; 2 + 2
stdin:1: unexpected symbol near '2'
&gt; print 2 + 2
stdin:1: '=' expected near '2'</pre><p>If you type something that makes sense except that it's incomplete, Lua lets you finish it on another line. For example, press Enter before the close parenthesis, type the close parenthesis, and press Enter again, like this:</p><pre class="programlisting">&gt; print(2 + 2
&gt;&gt; )
4</pre><p>Lua sees that the first line you typed was incomplete, so it printed <code class="literal">&gt;&gt;</code>. This is a <span class="emphasis"><em>continuation prompt</em></span>, Lua's way of letting you know that it's waiting for you to finish what you started. When Lua got the close parenthesis on the next line, it was able to print the result.</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="other_notations_for_numbers"></a>Other Notations for Numbers</h2></div></div></div><p>You can also write numbers using <span class="emphasis"><em>scientific notation</em></span>, where the part before the upper- or lowercase <code class="literal">e</code> is multiplied by 10 to the power after the <code class="literal">e</code>. For example, <code class="literal">5e2</code> means 5 times 10 to the 2nd power, or 500. Scientific notation is normally used to write extremely large or extremely small numbers, or for Lua to print them. Here are some examples:<a id="IDX-CHP-2-0020" class="indexterm"></a><a id="IDX-CHP-2-0021" class="indexterm"></a></p><pre class="programlisting">&gt; print(5e2)
500
&gt; print(5e-2)
0.05
&gt; print(1.2193263111264E17 / 987654321)
123456789
&gt; print(123456789 * 987654321)
1.2193263111264e+17
&gt; print(2.3283064365387e-10 * 4294967296)
1</pre><p>The numbers you use in daily life (and have used so far in this chapter) are decimal, or base 10. This means that there are 10 digits, 0-9. Lua also understands hexadecimal (base 16) numbers, using the letters a-f (or A-F) to represent 10 through 15. Hexadecimal numbers should start with <code class="literal">0x</code> or <code class="literal">0X</code>. (That's a zero before the <code class="literal">x</code>, not a letter O.) They have to be <span class="emphasis"><em>integers</em></span> (whole numbers). Take a look at these examples:<a id="IDX-CHP-2-0022" class="indexterm"></a><a id="IDX-CHP-2-0023" class="indexterm"></a><a id="IDX-CHP-2-0024" class="indexterm"></a><a id="IDX-CHP-2-0025" class="indexterm"></a><a id="IDX-CHP-2-0026" class="indexterm"></a><a id="IDX-CHP-2-0027" class="indexterm"></a><a id="IDX-CHP-2-0028" class="indexterm"></a></p><pre class="programlisting">&gt; print(0x1)
1
&gt; print(0x10)
16
&gt; print(0xff)
255
&gt; print(0XA)
10
&gt; print(0x03e8)
1000
&gt; print(-0xf000)
-61440
&gt; print(0xff.ff)
stdin:1: ')' expected near '.'</pre><div class="blockquote"><blockquote class="blockquote"><p>Lua 5.0 did not understand hexadecimal numbers.</p></blockquote></div></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="interpreter_know-how"></a>Interpreter Know-How</h1></div></div></div><p>Before learning any more about the Lua language, you should know a couple things about the interpreter.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="quitting_the_interpreter"></a>Quitting the Interpreter</h2></div></div></div><p>Sooner or later, you'll want to take a break. There are three ways to get out of the interpreter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Press Ctrl+C. This sends the interpreter what is called an <span class="emphasis"><em>interrupt signal</em></span>. If the interpreter is waiting for you to type something, this will exit the interpreter. If the interpreter is stuck, doing something (or nothing) over and over without stopping, then this same key combination will get you back to the state where the interpreter is waiting for you to type something.<a id="IDX-CHP-2-0029" class="indexterm"></a></p></li><li class="listitem"><p>Press Ctrl+Z (or on Unix-like platforms, including Mac OS X, press Ctrl+D) at the beginning of an empty line and press Enter. This sends an <span class="emphasis"><em>end-of-file</em></span> (<span class="emphasis"><em>EOF</em></span>). It's a signal to Lua that it should give up trying to get input from you.</p></li><li class="listitem"><p>The most typing-intensive way to stop the interpreter is to type the following line:</p><pre class="programlisting">os.exit()</pre></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="interpreter_shortcuts"></a>Interpreter Shortcuts</h2></div></div></div><p>Depending on your system, you may be able to scroll through an editable history of previous lines you've typed by using the up- and down-arrow keys on your keyboard.</p><div class="blockquote"><blockquote class="blockquote"><p>On Windows XP and Windows 2000, this history feature is handled by the <code class="literal">cmd</code> shell. On Windows 95, 98, and Me, it is handled by the <code class="literal">doskey</code> utility (if it's running). On Unix-like systems, it's handled by the GNU Readline and History libraries, if they were linked to when your copy of Lua was compiled.<a id="IDX-CHP-2-0030" class="indexterm"></a><a id="IDX-CHP-2-0031" class="indexterm"></a><a id="IDX-CHP-2-0032" class="indexterm"></a><a id="IDX-CHP-2-0033" class="indexterm"></a><a id="IDX-CHP-2-0034" class="indexterm"></a><a id="IDX-CHP-2-0035" class="indexterm"></a><a id="IDX-CHP-2-0036" class="indexterm"></a></p></blockquote></div><p>Here's another typing saver. When the interpreter sees a line that starts with <code class="literal">=</code>, such as the following, it treats the rest of the line as though it came between the parentheses of a <code class="literal">print</code>:</p><pre class="programlisting">&gt; =2 + 2
4</pre><p>This is not part of the Lua language proper—it only works when you're typing something into the interpreter interactively. This means it's not to be confused with the use of the equal sign that <span class="emphasis"><em>is</em></span> part of Lua proper, which you'll learn about in the next section. You can substitute this typing-saver use of <code class="literal">=</code> for <code class="literal">print()</code> in some of the examples in this chapter, but not all of them. Roughly speaking, you can only use it if what you're typing is a line unto itself, and not part of one of the multiline structures you'll learn about later. For consistency, this book generally uses <code class="literal">print()</code>, but you should substitute <code class="literal">=</code> when possible.</p><div class="blockquote"><blockquote class="blockquote"><p>If you can access the history of what you've typed with the arrow keys, you may (depending on your system) see that lines that start with <code class="literal">=</code> have been transformed into lines that start with <code class="literal">return</code>. You'll learn about <code class="literal">return</code> in the next chapter.</p></blockquote></div></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="numerical_gotchas"></a>Numerical Gotchas</h1></div></div></div><p>At the intersection of the elegant world of mathematics and the sometimes rough-and-ready world of computers, nonintuitive things may happen. This section explains the major ones.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="division_by_zero_and_overflow"></a>Division by Zero and Overflow</h2></div></div></div><p>In arithmetic, dividing a number by zero is undefined. It's also undefined in Lua, which in practice means that what happens when you divide by zero depends on the C compiler used to compile your copy of Lua. To find out what happens on your own system, simply divide something by zero and observe the result. Here is an incomplete list of the possibilities:<a id="IDX-CHP-2-0037" class="indexterm"></a></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Lua may abruptly exit (with no error message).</p></li><li class="listitem"><p>Lua may freeze and your operating system may display an error message. (If necessary, use Ctrl+C to get out of Lua.)</p></li><li class="listitem"><p>The calculation may succeed and give a result. This result may not be a regular number but may instead look like <code class="literal">−1.#IND, 1.#INF, Inf</code>, or <code class="literal">NaN</code>.</p></li></ul></div><p>If you do get a pseudo-number like <code class="literal">NaN</code>, beware: These generally have unusual behavior, sometimes to the extent of not being equal to themselves.</p><p>Unless you're prepared for the results, never divide by zero.</p><p>On most systems, the highest and lowest possible numbers have more than 300 digits (when written in regular base-10 notation). If you happen to go beyond these limits, the same division-by-zero warnings discussed in this section apply.<a id="IDX-CHP-2-0038" class="indexterm"></a><a id="IDX-CHP-2-0039" class="indexterm"></a><a id="IDX-CHP-2-0040" class="indexterm"></a><a id="IDX-CHP-2-0041" class="indexterm"></a><a id="IDX-CHP-2-0042" class="indexterm"></a><a id="IDX-CHP-2-0043" class="indexterm"></a><a id="IDX-CHP-2-0044" class="indexterm"></a></p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="floating-point_rounding"></a>Floating-Point Rounding</h2></div></div></div><p>Decimal-point notation cannot accurately express fractions unless they can be expressed in tenths, hundredths, and so on. For instance, <code class="literal">½</code> is </p><div><img src="https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/figs/U0201.png" alt="Floating-Point Rounding" width="17" height="14"></div><p>Another type of rounding takes place when a number is printed—if it would have an absurdly long number of decimal places, it is rounded to a nearby number. The following example demonstrates both types of rounding:<a id="IDX-CHP-2-0046" class="indexterm"></a></p><div class="blockquote"><blockquote class="blockquote"><p>This example uses some things you won't learn until later in this chapter. It's shown here for reference purposes only.</p></blockquote></div><pre class="programlisting">&gt; AlmostOne = 0.1 + 0.1 + 0.1 + 0.1 + 0.1 +
&gt;&gt; 0.1 + 0.1 + 0.1 + 0.1 + 0.1
&gt; print(AlmostOne &gt; 1)
true
&gt; print(AlmostOne)
1</pre><p>Don't let this scare you off—in most situations problems like this don't arise. However, if you do run into two numbers that look alike but are not equal to each other, you now know a possible cause.</p><p>If you want to know more about these issues, go to the library or the web. One standard reference is David Goldberg's paper "What Every Computer Scientist Should Know About Floating-Point Arithmetic," which is available at <code class="systemitem">http://docs.sun.com/source/806-3568/ncg_goldberg.html</code>.</p><div class="blockquote"><blockquote class="blockquote"><p>By default, Lua uses what are known as <span class="emphasis"><em>double-precision floating-point numbers</em></span>. It's possible to recompile Lua to use another representation for numbers. Unless you're using special hardware, doing this will not avoid the problems just discussed (or it will trade them for another set of problems).</p></blockquote></div></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="variables_and_assignment"></a>Variables and Assignment</h1></div></div></div><p>Like almost all programming languages, Lua has <span class="emphasis"><em>variables</em></span>. For now, you can think of these as named cubbyholes or storage containers for values. (Numbers are the only values you've encountered so far, but you'll learn about other types later in the chapter.) After you put a value into a variable, you can refer to it using the variable's name.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="assignment_basics"></a>Assignment Basics</h2></div></div></div><p>Putting a value into a variable is called <span class="emphasis"><em>assignment</em></span>. Here are two examples of assignment (along with some <code class="literal">prints</code> that show what's going on):<a id="IDX-CHP-2-0047" class="indexterm"></a><a id="IDX-CHP-2-0048" class="indexterm"></a><a id="IDX-CHP-2-0049" class="indexterm"></a><a id="IDX-CHP-2-0050" class="indexterm"></a><a id="IDX-CHP-2-0051" class="indexterm"></a><a id="IDX-CHP-2-0052" class="indexterm"></a></p><pre class="programlisting">&gt; NumberA = 2
&gt; print(NumberA)
2
&gt; NumberB = 2 + 2
&gt; print(NumberB)
4
&gt; print(NumberA + NumberB)
6</pre><p>An equal sign assigns a value to a variable. In these examples, the value <code class="literal">2</code> is assigned to the variable <code class="literal">NumberA</code>, and the value <code class="literal">4</code> (the result of <code class="literal">2 + 2</code>) is assigned to the variable <code class="literal">NumberB</code>.</p><p>After a value has been assigned to a variable, you can access the value again using the variable's name, such as <code class="literal">print(NumberA)</code> or <code class="literal">print(NumberA + NumberB)</code>.</p><p>Notice that Lua's equal sign means a different thing than the one in algebra. The algebraic equal sign is a statement of fact indicating that two things are equal. Lua's equal sign is a command to Lua to make two things equal, so that the one on the left can be used in place of the one on the right. Because of this, a particular variable may contain different values at different points in a program. Here's an example:<a id="IDX-CHP-2-0053" class="indexterm"></a></p><pre class="programlisting">&gt; Sum = 2 + 2
&gt; print(Sum)
4
&gt; Sum = 2 + 5000
&gt; print(Sum)
5002</pre><p>There are rules for variable names, or <span class="emphasis"><em>identifiers</em></span>: An identifier has to start with a letter or an underscore. It can't contain anything other than letters, underscores, or digits. Nor can it be one of Lua's <span class="emphasis"><em>reserved words</em></span> or <span class="emphasis"><em>keywords</em></span>, which are <code class="literal">and, break, do, else, elseif, end, false, for, function, if, in, local, nil, not, or, repeat, return, then, true, until</code>, and <code class="literal">while</code>. The following are all valid identifiers:<a id="IDX-CHP-2-0054" class="indexterm"></a></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">a</code></p></li><li class="listitem"><p><code class="literal">A</code></p></li><li class="listitem"><p><code class="literal">ABC</code></p></li><li class="listitem"><p><code class="literal">_xyz</code></p></li><li class="listitem"><p><code class="literal">something_55</code></p></li><li class="listitem"><p><code class="literal">AnotherThing</code></p></li><li class="listitem"><p><code class="literal">_____</code></p></li></ul></div><p>None of the following are valid identifiers:<a id="IDX-CHP-2-0055" class="indexterm"></a><a id="IDX-CHP-2-0056" class="indexterm"></a><a id="IDX-CHP-2-0057" class="indexterm"></a><a id="IDX-CHP-2-0058" class="indexterm"></a><a id="IDX-CHP-2-0059" class="indexterm"></a></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">function</code> (a keyword)</p></li><li class="listitem"><p><code class="literal">this-var</code> (contains something other than a letter, number, or underscore)</p></li><li class="listitem"><p><code class="literal">1stThing</code> (starts with something other than a letter or underscore)</p></li></ul></div><p>Lua is case-sensitive, which means that <code class="literal">NUM, Num</code>, and <code class="literal">num</code> are all different identifiers:</p><pre class="programlisting">&gt; NUM = 1
&gt; Num = 2
&gt; num = 3
&gt; print(NUM)
1
&gt; print(Num)
2
&gt; print(num)
3</pre><p>This also means that <code class="literal">FUNCTION, Function</code>, and <code class="literal">fUnCtIoN</code> are all valid identifiers, because none of them is the keyword <code class="literal">function</code>.</p><p>There are various styles for identifiers:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">totalsales</code></p></li><li class="listitem"><p><code class="literal">total_sales</code></p></li><li class="listitem"><p><code class="literal">totalSales</code></p></li><li class="listitem"><p><code class="literal">TotalSales</code></p></li></ul></div><p>Some programmers even use different styles for different types of variables. If you're working on someone else's code, use the style used by that code. In your own code, pick a style and stick to it. This book uses the style <code class="literal">TotalSales</code>. Lua itself generally uses the <code class="literal">totalsales</code> style, so in this book, you can tell by looking whether a variable is defined in an example or built into Lua.</p><p>Lua has a few special variables that start with an underscore followed by capital letters (and possibly a number), such as <code class="literal">_G</code> or <code class="literal">_PROMPT2</code>. Avoid using names like that so that your variables don't clash with them.</p><p>A single underscore (<code class="literal">_</code>) is often used as a variable for <span class="emphasis"><em>junk values</em></span>—values that need to be assigned, but won't be used. (You see this in <a class="link" href="ch04.html" title="Chapter 4. Working with Tables">Chapter 4</a> and elsewhere in the book.)<a id="IDX-CHP-2-0060" class="indexterm"></a></p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="multiple_assignment"></a>Multiple Assignment</h2></div></div></div><p>You can assign multiple values to multiple variables at the same time. You can also print multiple values at the same time. The comma is used for both. Here's how you use the comma for multiple assignment, and for printing multiple values at the same time:<a id="IDX-CHP-2-0061" class="indexterm"></a><a id="IDX-CHP-2-0062" class="indexterm"></a><a id="IDX-CHP-2-0063" class="indexterm"></a><a id="IDX-CHP-2-0064" class="indexterm"></a></p><pre class="programlisting">&gt; Sum, Product, Exponent = 10 + 10, 10 * 10, 10 ^ 10
&gt; print(Sum, Product, Exponent)
20  100  10000000000</pre><p>In this example, three values were generated by adding <code class="literal">10</code> to itself, multiplying it by itself, and raising it to the 10th power. These three values were assigned respectively to the three variables <code class="literal">Sum, Product</code>, and <code class="literal">Exponent</code>. These three variables (more specifically, the values in these variables) were then printed.</p><p>You can also use multiple assignment to swap, rotate, or otherwise interchange the contents of variables. Here's an example:</p><pre class="programlisting">&gt; A, B = 1, 2
&gt; print(A, B)
1       2
&gt; A, B = B, A
&gt; print(A, B)
2       1
&gt; John, Jane, Jolene = "chips", "lemonade", "egg salad"
&gt; print(John, Jane, Jolene)
chips   lemonade        egg salad
&gt; John, Jane, Jolene = Jane, Jolene, John
&gt; print(John, Jane, Jolene)
lemonade        egg salad       chips</pre><p>Notice that without multiple assignment, swapping the contents of two variables would require a third variable for temporary storage:<a id="IDX-CHP-2-0065" class="indexterm"></a></p><pre class="programlisting">&gt; A = 1
&gt; B = 2
&gt; print(A, B)
1       2
&gt; Tmp = A
&gt; A = B
&gt; B = Tmp
&gt; print(A, B)
2       1</pre></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="variables_on_the_right_side_of_assignmen"></a>Variables on the Right Side of Assignments</h2></div></div></div><p>As you may have noticed in some the previous examples, and as shown in the following example, the thing to the right of the equal sign can also be a variable:<a id="IDX-CHP-2-0066" class="indexterm"></a><a id="IDX-CHP-2-0067" class="indexterm"></a><a id="IDX-CHP-2-0068" class="indexterm"></a><a id="IDX-CHP-2-0069" class="indexterm"></a><a id="IDX-CHP-2-0070" class="indexterm"></a><a id="IDX-CHP-2-0071" class="indexterm"></a></p><pre class="programlisting">&gt; A = 10
&gt; B = A
&gt; print(B)
10</pre><p>Even if a variable got its value from another variable, the two variables are independent. For example:</p><pre class="programlisting">&gt; A = 10
&gt; B = A
&gt; print(A, B)
10      10
&gt; A = 555
&gt; print(A, B)
555     10</pre><p>This is because once the assignment gets the value of a variable that's on its right side, it forgets what variable the value came from (or even that it came from a variable at all).</p></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="strings"></a>Strings</h1></div></div></div><p>Numbers are nice, but most programs need to deal with <span class="emphasis"><em>strings</em></span>, which are sequences of <span class="emphasis"><em>characters</em></span> (a letter, digit, space, or punctuation mark) or <span class="emphasis"><em>control characters</em></span> (such a newline or formfeed).<a id="IDX-CHP-2-0072" class="indexterm"></a></p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="quoting_strings"></a>Quoting Strings</h2></div></div></div><p>A string can contain any text—even something that itself looks like Lua code—so it needs to be separated from the actual Lua code that comes before and after it. This is called <span class="emphasis"><em>quoting</em></span> the string.</p><p>There are three ways to quote strings: with double quotes, with single quotes, and with square brackets.<a id="IDX-CHP-2-0073" class="indexterm"></a><a id="IDX-CHP-2-0074" class="indexterm"></a></p><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="quoting_strings_with_double_quotes"></a>Quoting Strings with Double Quotes</h3></div></div></div><p>The double quote characters (<code class="literal">"</code>) mark the beginning and end of the string. Marking the beginning and end is all they do; they are not actually part of the string, which is why <code class="literal">print</code> doesn't print them, as in this example:</p><pre class="programlisting">&gt; print("This is a string!")
This is a string!</pre><p>Like numbers, strings are values, which means they can be assigned to variables. Here's an example:<a id="IDX-CHP-2-0075" class="indexterm"></a><a id="IDX-CHP-2-0076" class="indexterm"></a><a id="IDX-CHP-2-0077" class="indexterm"></a><a id="IDX-CHP-2-0078" class="indexterm"></a><a id="IDX-CHP-2-0079" class="indexterm"></a><a id="IDX-CHP-2-0080" class="indexterm"></a></p><pre class="programlisting">&gt; Name, Phone = "Jane X. Doe", "248-555-5898"
&gt; print(Name, Phone)
Jane X. Doe    248-555-5898</pre><p>The same variable can contain both a string and a number at different times, as shown here:</p><pre class="programlisting">&gt; Var = 42
&gt; print(Var)
42
&gt; Var = "forty-two"
&gt; print(Var)
forty-two</pre><p>You can also have an <span class="emphasis"><em>empty string</em></span>, which contains no characters between the quote marks. For example:<a id="IDX-CHP-2-0081" class="indexterm"></a></p><pre class="programlisting">&gt; print("")

&gt;</pre></div><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="quoting_strings_with_single_quotes"></a>Quoting Strings with Single Quotes</h3></div></div></div><p>You can also quote strings by using the single quote (or apostrophe) character (<code class="literal">'</code>), like this:</p><pre class="programlisting">&gt; print('This is also a string.')
This is also a string.</pre><p>Single quotes work exactly like double quotes except that a single-quoted string can contain a double quote (without that double quote marking the end of the string). Similarly, a double-quoted string can contain a single quote (without that single quote marking the end of the string). Here are some examples:</p><pre class="programlisting">&gt; print('Cry "Havoc," and let slip the dogs of war')
Cry "Havoc," and let slip the dogs of war
&gt; print("Cry 'Havoc,' and let slip the dogs of war")
Cry 'Havoc,' and let slip the dogs of war</pre><p>Other than how they treat embedded double and single quotes, single and double quotes work exactly the same, and you can use either one. The best practice is to pick one and stick with it in all cases except those in which the other is more convenient.</p></div><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="quoting_strings_with_square_brackets"></a>Quoting Strings with Square Brackets</h3></div></div></div><p>You can also quote strings with pairs of square brackets. Square brackets are used mainly for strings that would be too unwieldy to quote with double or single quotes, like this one:</p><pre class="programlisting">&gt; print([[There are some
&gt;&gt; funky "\' characters
&gt;&gt; in this string.]])
There are some
funky "\' characters
in this string.</pre><p>If you mark the beginning of a string with two open square brackets (<code class="literal">[[</code>), then you mark the end with two close square brackets (<code class="literal">]]</code>). Inside such a string, no characters have any special meaning—a double quote represents a double quote, a <span class="emphasis"><em>newline</em></span> (the invisible character that marks the end of a line, as when you press Enter) represents a newline, a backslash represents a backslash, a backslash followed by a letter <code class="literal">n</code> represents a backslash followed by a letter <code class="literal">n</code>, and so on. Strings quoted this way are sometimes called <span class="emphasis"><em>long strings</em></span>, because they can be spread out over several lines, but they work fine on one line too.<a id="IDX-CHP-2-0082" class="indexterm"></a><a id="IDX-CHP-2-0083" class="indexterm"></a></p><p>If the first character of a square-bracket string is a newline, it is ignored. This allows you to write multiline square-bracket strings in an easier-to-read way. The following two <code class="literal">print</code>s print exactly the same thing, but the second looks more like its result:</p><pre class="programlisting">&gt; print([[+-----+
&gt;&gt; | Lua |
&gt;&gt; +-----+
&gt;&gt; ]])
+-----+
| Lua |
+-----+

&gt; print([[
&gt;&gt; +-----+
&gt;&gt; | Lua |
&gt;&gt; +-----+
&gt;&gt; ]])
+-----+
| Lua |
+-----+</pre><p>What if you wanted to print two close square brackets inside a long string? For example:</p><pre class="programlisting">&gt; print([[Here ]] are some square brackets.]])
stdin:1: ')' expected near 'are'</pre><p>The square brackets are interpreted by Lua as the end of the string. A backslash (the Lua escape character, discussed in the following section) won't prevent this from happening, because backslashes have no special meaning inside square-bracket strings. Instead, put an equal sign between the string's opening square brackets, and another between the closing square brackets:</p><pre class="programlisting">&gt; print([=[Here ]] are some square brackets.]=])
Here ]] are some square brackets.</pre><p>If you need to, you can use multiple equal signs—the same number at the beginning and the end—like this:</p><pre class="programlisting">&gt; print([=[babble ]=] burble]=])
stdin:1: ')' expected near 'burble'
&gt; print([==[babble ]=] burble]==])
babble ]=] burble
&gt; print([====[babble ]=]==]===] burble]====])
babble ]=]==]===] burble</pre><p>In other words, a square-bracket string starts with an open square bracket, zero or more equal signs, and another open square bracket, and it ends with a close square bracket, the same number of equal signs, and another close square bracket.<a id="IDX-CHP-2-0084" class="indexterm"></a><a id="IDX-CHP-2-0085" class="indexterm"></a><a id="IDX-CHP-2-0086" class="indexterm"></a></p><div class="blockquote"><blockquote class="blockquote"><p>Lua 5.0 had a slightly different quoting method for long strings: The beginning was always <code class="literal">[[</code>(never <code class="literal">[=[</code> or <code class="literal">[==[</code>), and the end was always <code class="literal">]]</code> (never <code class="literal">]=]</code> or <code class="literal">]==]</code>). Also, matching sets of bracket pairs could nest—<code class="literal">[[[[ ]]]]</code> was legal and equivalent to <code class="literal">"[[ ]]"</code>. The equivalent Lua 5.1 long string would be <code class="literal">[=[[[ ]]]=]</code>.</p></blockquote></div></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="backslash_escaping"></a>Backslash Escaping</h2></div></div></div><p>You can use the backslash character (<code class="literal">\</code>)inside double- and single-quoted strings to do things that would otherwise be inconvenient or impossible.</p><p>When the double quote character occurs within a double-quoted string, it has a special meaning: end of string. As you saw earlier, one way to avoid this special meaning (so that a double quote can be part of a string) is to quote the string with single quotes. Here's another way, using the backslash:</p><pre class="programlisting">&gt; print("Cry \"Havoc\"")
Cry "Havoc"</pre><p>When a double quote is preceded by a backslash, the double quote's end-of-string meaning is taken away (escaped), and it becomes a part of the string. The backslash itself is not part of the string (in the same way that the quotes at the beginning and end of the string aren't part of it).</p><p>In other words, a backslash followed by a double quote represents a double quote. In the same way, a backslash followed by a single quote represents a single quote. For example:</p><pre class="programlisting">&gt; print('Ain\'t nobody\'s business if you do!')
Ain't nobody's business if you do!</pre><p>A backslash followed by a backslash represents a backslash (just one):</p><pre class="programlisting">&gt; print("1 backslash: \\ 2: \\\\ 3: \\\\\\")
1 backslash: \ 2: \\ 3: \\\</pre><p>And a backslash followed by a newline represents a newline:</p><pre class="programlisting">&gt; print("one\
&gt;&gt; two")
one
two</pre><div class="blockquote"><blockquote class="blockquote"><p>Different systems have different conventions for what character or character sequence is used to mark the end of a line. Lua accounts for this automatically—if any of the common end-of-line characters or character sequences occur in Lua code, inside or outside of string quotes, they are silently translated to newlines.<a id="IDX-CHP-2-0087" class="indexterm"></a></p></blockquote></div><p>Normally, breaking a string into two lines would result in an error such as this:</p><pre class="programlisting">&gt; print("one
&gt;&gt; two")
stdin:1: unfinished string near '"one'</pre><p>In addition to letting double quotes, single quotes, backslashes, and newlines represent themselves, the backslash also gives special meanings to some characters. For example, a backslash followed by a lowercase letter <code class="literal">n</code> represents a newline:</p><pre class="programlisting">&gt; print("one\ntwo")
one
two</pre><p>These sequences of characters that start with a backslash are called <span class="emphasis"><em>escape sequences</em></span>, because they temporarily escape from the normal interpretation of characters. Here are all of them:<a id="IDX-CHP-2-0088" class="indexterm"></a></p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col1"><col class="col2"></colgroup><thead><tr><th style="text-align: left" valign="bottom"><p>Escape Sequence Meaning</p></th><th style="text-align: left" valign="bottom"><p>Meaning</p></th></tr></thead><tbody><tr><td style="text-align: left" valign="top"><p><code class="literal">\a</code></p></td><td style="text-align: left" valign="top"><p>\Bell (in certain circumstances, printing this character causes the computer to beep—a stands for "alert")</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\b</code></p></td><td style="text-align: left" valign="top"><p>Backspace</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\f</code></p></td><td style="text-align: left" valign="top"><p>Formfeed</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\n</code></p></td><td style="text-align: left" valign="top"><p>Newline</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\r</code></p></td><td style="text-align: left" valign="top"><p>Carriage return (some operating systems use this by itself or in combination with newline to represent the end of a line)</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\t</code></p></td><td style="text-align: left" valign="top"><p>Tab (used to format text in columns)</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\v</code></p></td><td style="text-align: left" valign="top"><p>Vertical tab</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\\</code></p></td><td style="text-align: left" valign="top"><p>Backslash</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\"</code></p></td><td style="text-align: left" valign="top"><p>Double quote</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\'</code></p></td><td style="text-align: left" valign="top"><p>Single quote (apostrophe)</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\99</code></p></td><td style="text-align: left" valign="top"><p>The character whose numeric representation is 99 (described next)</p></td></tr><tr><td style="text-align: left" valign="top"><p><code class="literal">\</code></p></td><td style="text-align: left" valign="top"><p>Newline (a backslash followed by a literal newline represents a newline)</p></td></tr></tbody></table></div><p>A backslash followed by one, two, or three decimal digits represents the character whose numeric representation (inside the computer's memory or on a disk) is that number. This varies from system to system, but on most systems <code class="literal">"\99"</code> is the same as <code class="literal">"c"</code>—of course, in most circumstances it would make more sense to use the latter form rather than the former.</p><div class="blockquote"><blockquote class="blockquote"><p>Lua's escape sequences are similar to those of the C language. The most important difference is that numeric escapes like <code class="literal">\123</code> are interpreted as decimal (base 10), not octal (base 8).<a id="IDX-CHP-2-0089" class="indexterm"></a><a id="IDX-CHP-2-0090" class="indexterm"></a><a id="IDX-CHP-2-0091" class="indexterm"></a><a id="IDX-CHP-2-0092" class="indexterm"></a><a id="IDX-CHP-2-0093" class="indexterm"></a><a id="IDX-CHP-2-0094" class="indexterm"></a><a id="IDX-CHP-2-0095" class="indexterm"></a><a id="IDX-CHP-2-0096" class="indexterm"></a><a id="IDX-CHP-2-0097" class="indexterm"></a><a id="IDX-CHP-2-0098" class="indexterm"></a></p></blockquote></div><p>Lua strings can include any character, including the <span class="emphasis"><em>null byte</em></span>: the (invisible) character whose numeric representation is 0. However, parts of Lua that depend on the C language to handle strings will consider that character to mark the end of the string. For example:<a id="IDX-CHP-2-0099" class="indexterm"></a><a id="IDX-CHP-2-0100" class="indexterm"></a></p><pre class="programlisting">&gt; EmbeddedNull = "BEFORE\0after"
&gt; print(EmbeddedNull)
BEFORE</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="relational_operators_and_boolean_values"></a>Relational Operators and Boolean Values</h1></div></div></div><p><code class="literal">+, -, *, /</code>, and <code class="literal">^</code> are called operators, or more specifically, <span class="emphasis"><em>arithmetic operators</em></span>. Arithmetic operators ask "how much" questions. In this section you learn about <span class="emphasis"><em>relational operators</em></span>, which ask yes-or-no questions.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="comparing_numbers"></a>Comparing Numbers</h2></div></div></div><p>The operators in this section are relational because they ask about the relation between two values: whether one value is less than the other, greater than it, equal to it, and so on.</p><p>Here's how to ask Lua whether one number is less than another:</p><pre class="programlisting">&gt; print(4 &lt; 5)
true
&gt; print(5 &lt; 4)
false</pre><p>You've learned about two <span class="emphasis"><em>types</em></span> of values so far: numbers and strings. The less-than operator always gives <code class="literal">true</code> or <code class="literal">false</code> as a result. <code class="literal">true</code> and <code class="literal">false</code> look like strings at first glance, but actually they are a new type, called <span class="emphasis"><em>Boolean</em></span> values (named after the 19th-century mathematician George Boole). There are lots of numbers (<code class="literal">1, −300, 3.14159</code>) and lots of strings (<code class="literal">"Hello there!", "apple", "asdfjkl;"</code>), but <code class="literal">true</code> and <code class="literal">false</code> are the only Booleans. Because they are values, they can be assigned to variables. To hard-code a Boolean value into a program, just type <code class="literal">true</code> or <code class="literal">false</code> (with no quotes), like this:<a id="IDX-CHP-2-0101" class="indexterm"></a></p><pre class="programlisting">&gt; Boolean1, Boolean2, Boolean3 = true, false, 1 &lt; 2
&gt; print(Boolean1, Boolean2, Boolean3)
true    false   true</pre><p>There are six relational operators:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">A &lt; B</code> Is A less than B?</p></li><li class="listitem"><p><code class="literal">A &gt; B</code> Is A greater than B?</p></li><li class="listitem"><p><code class="literal">A &lt;= B</code> Is A less than or equal to B?</p></li><li class="listitem"><p><code class="literal">A &gt;= B</code> Is A greater than or equal to B?<a id="IDX-CHP-2-0102" class="indexterm"></a><a id="IDX-CHP-2-0103" class="indexterm"></a><a id="IDX-CHP-2-0104" class="indexterm"></a><a id="IDX-CHP-2-0105" class="indexterm"></a><a id="IDX-CHP-2-0106" class="indexterm"></a></p></li><li class="listitem"><p><code class="literal">A == B</code> Is A equal to B?</p></li><li class="listitem"><p><code class="literal">A ~= B</code> Is A not equal to B?</p></li></ul></div><p>Of these six, <code class="literal">&lt;, &gt;, &lt;=</code>, and <code class="literal">&gt;=</code> determine what order two values are in. <code class="literal">==</code> and <code class="literal">~=</code> just determine whether two values are equal. For example:</p><pre class="programlisting">&gt; print(1 &gt; 1)
false
&gt; print(1 &gt; 2)
false
&gt; print(1 &gt;= 1)
true
&gt; print(1 &gt;= 2)
false
&gt; print(1 == 1)
true
&gt; print(1 == 2)
false
&gt; print(1 ~= 1)
false
&gt; print(1 ~= 2)
true</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Two values of different types are never considered equal, even if they look similar. So the number <code class="literal">1</code> is not equal to the string <code class="literal">"1"</code>, and the string <code class="literal">"true"</code> is not equal to the Boolean <code class="literal">true</code>. Also, unlike some other languages, the number <code class="literal">0</code> is not equal to either the empty string <code class="literal">""</code> or the Boolean <code class="literal">false</code>, and the number <code class="literal">1</code> is not equal to the Boolean <code class="literal">true</code>.</p></div><p>Here are a couple common errors:</p><pre class="programlisting">&gt; Num == 42
stdin:1: '=' expected near '=='
&gt; print(Num = 42)
stdin:1: ')' expected near '='</pre><p>A single equal sign is used for assignment and a double equal sign is used for equality comparison. It's very common to mix these up, but Lua always spots the error.</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="comparing_strings"></a>Comparing Strings</h2></div></div></div><p>If two strings have the same characters in them (in the same order), then they are considered the same string, which means they are equal to each other (because a value is always equal to itself). For example:</p><pre class="programlisting">&gt; Str1 = "Jane X. Doe"
&gt; Str2 = "Jane X. Doe"
&gt; print(Str1 == Str2)
true</pre><p><code class="literal">&lt;, &gt;, &lt;=</code>, and <code class="literal">&gt;=</code> can be used on strings as well. Single-character strings compare based on their collation (sorting) order in the current <span class="emphasis"><em>locale</em></span>. In the simplest case, this is their order in your system's character set. (Locale is a system setting that determines, among other things, the appropriate alphabetization order for the language being used.) Here are some examples:<a id="IDX-CHP-2-0107" class="indexterm"></a><a id="IDX-CHP-2-0108" class="indexterm"></a><a id="IDX-CHP-2-0109" class="indexterm"></a></p><pre class="programlisting">&gt; print("a" &lt; "b")
true
&gt; print("a" &lt; "a")
false
&gt; print("a" &lt;= "a")
true
&gt; print("A" &lt; "a")
true
&gt; print(" " &lt; "\n")
true</pre><p>Multiple-character strings compare based on the first character that is different, like this:<a id="IDX-CHP-2-0110" class="indexterm"></a><a id="IDX-CHP-2-0111" class="indexterm"></a></p><pre class="programlisting">&gt; print("abcd" &lt; "abce")
true</pre><p>The absence of a character is considered less than any character, as these examples illustrate:<a id="IDX-CHP-2-0112" class="indexterm"></a></p><pre class="programlisting">&gt; print("" &lt; "A")
true
&gt; print("" &lt; "\0")
true
&gt; print("abc" &lt; "abcd")
true</pre><p>Although <code class="literal">==</code> and <code class="literal">~=</code> can be used with values of any type, even values of two different types, the <code class="literal">&lt;, &gt;, &lt;=</code>, and <code class="literal">&gt;=</code> operators can only be used with two numbers or two strings. Anything else causes an error, as these examples show:</p><pre class="programlisting">&gt; print(false &lt; true)
stdin:1: attempt to compare two boolean values
stack traceback:
        stdin:1: in main chunk
        [C]: ?
&gt; print(42 &lt;= "41")
stdin:1: attempt to compare string with number
stack traceback:
        stdin:1: in main chunk
        [C]: ?</pre><div class="blockquote"><blockquote class="blockquote"><p>The rule that <code class="literal">&lt;, &gt;, &lt;=</code>, and <code class="literal">&gt;=</code> can only be used to compare two strings or two numbers is not strictly true. You'll learn how to bypass this rule—and several other rules given in this chapter—with metatables in <a class="link" href="ch08.html" title="Chapter 8. Extending Lua's Behavior with Metamethods">Chapter 8</a>.</p></blockquote></div></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="the_nil_value"></a>The nil Value</h1></div></div></div><p>Assigning an initial value to a variable is called <span class="emphasis"><em>initializing</em></span> it. A variable that has had no value assigned to it is said to be <span class="emphasis"><em>uninitialized</em></span>. You've learned about three types of value (also known as <span class="emphasis"><em>datatypes</em></span>) so far: numbers, strings, and Booleans. There's one more type to learn about in this chapter, and you'll see it if you print the value of an uninitialized variable such as the following:<a id="IDX-CHP-2-0113" class="indexterm"></a><a id="IDX-CHP-2-0114" class="indexterm"></a><a id="IDX-CHP-2-0115" class="indexterm"></a><a id="IDX-CHP-2-0116" class="indexterm"></a><a id="IDX-CHP-2-0117" class="indexterm"></a><a id="IDX-CHP-2-0118" class="indexterm"></a><a id="IDX-CHP-2-0119" class="indexterm"></a></p><pre class="programlisting">&gt; print(Asdf)
nil</pre><p>This is the value <code class="literal">nil</code>. Its type is also named <code class="literal">nil</code>; in fact it is the only value whose type is <code class="literal">nil</code>. It is used mainly to represent the absence of any other value. Any uninitialized variable has <code class="literal">nil</code> as its value.</p><p>You can also explicitly assign <code class="literal">nil</code> to a variable, which you might do if you want Lua to forget about the variable's previous value. For example:</p><pre class="programlisting">&gt; Password = "$xa(yb`y"
&gt; print(Password)
$xa(yb`y
&gt; Password = nil
&gt; print(Password)
nil</pre><p><code class="literal">nil</code> also comes into play when an assignment is made that has more variables on its left side than values on its right side. Here's an example:</p><pre class="programlisting">&gt; C, D = 3, 4
&gt; A, B, C, D = 1, 2
&gt; print(A, B, C, D)
1        2        nil        nil</pre><p>If there are more variables on the left side of an assignment than there are values on the right side, the list of values is <span class="emphasis"><em>adjusted</em></span> to the correct length by adding <code class="literal">nils</code> to the end. So the line where <code class="literal">A</code> and <code class="literal">B</code> are assigned as follows:</p><pre class="programlisting">&gt; A, B, C, D = 1, 2</pre><p>acts just as though it had been written like this:</p><pre class="programlisting">&gt; A, B, C, D = 1, 2, nil, nil</pre><p>This means that extra variables (<code class="literal">C</code> and <code class="literal">D</code> in this example) are set to <code class="literal">nil</code>, even if they already have been set to another value.</p><p>If there are more values on the right than variables on the left, the list of values is adjusted by throwing away the extra values, like this:<a id="IDX-CHP-2-0120" class="indexterm"></a></p><pre class="programlisting">&gt; A, B = 1, 2, 3, 4
&gt; print(A, B)
1  2</pre><p><code class="literal">nil</code> is different from <code class="literal">false, 0</code>, and the string <code class="literal">"nil"</code>. But, like all values, it's equal to itself:</p><pre class="programlisting">&gt; print(nil ~= false)
true
&gt; print(nil ~= 0)
true
&gt; print(nil ~= "nil")
true
&gt; print(nil == nil)
true</pre><p>If a <code class="literal">nil</code> turns up where you don't expect it, a typo is usually the cause. In the following example, the variable <code class="literal">LoginCount</code> is initialized, but then its name is miscapitalized as <code class="literal">LogInCount</code>, which is a different variable:</p><pre class="programlisting">&gt; MaxLoginCount = 100
&gt; LoginCount = 50
&gt; print(LogInCount &gt; MaxLoginCount)
stdin:1: attempt to compare number with nil
stack traceback:
        stdin:1: in main chunk
        [C]: ?</pre><p>Because <code class="literal">LogInCount</code> is uninitialized, its value is <code class="literal">nil</code>, which can't be compared to a number.</p><p>In the next example, <code class="literal">Joe</code> and <code class="literal">Mike</code> were intended as strings, but because they are not quoted, they're treated as (uninitialized) variables:</p><pre class="programlisting">&gt; FirstNameA, FirstNameB = Joe, Mike
&gt; print(FirstNameA &lt; FirstNameB)
stdin:1: attempt to compare two nil values
stack traceback:
        stdin:1: in main chunk
        [C]: ?</pre></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="boolean_operators"></a>Boolean Operators</h1></div></div></div><p>The three <span class="emphasis"><em>Boolean operators</em></span>—<code class="literal">and, or</code>, and <code class="literal">not</code>—are handy for working with Boolean values. However, as you will see, they can also be given non-Boolean values, and two of them (<code class="literal">and</code> and <code class="literal">or</code>) don't always even give Boolean results.<a id="IDX-CHP-2-0121" class="indexterm"></a></p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_and_operator"></a>The and Operator</h2></div></div></div><p>Like the other operators you've seen so far, the <code class="literal">and</code> operator takes two values, one to its left and one to its right. The values given to an operator are called <span class="emphasis"><em>operands</em></span>. The simple explanation of <code class="literal">and</code> is that it gives a true result only if both of its operands are true, as follows:<a id="IDX-CHP-2-0122" class="indexterm"></a><a id="IDX-CHP-2-0123" class="indexterm"></a><a id="IDX-CHP-2-0124" class="indexterm"></a><a id="IDX-CHP-2-0125" class="indexterm"></a></p><pre class="programlisting">&gt; print(false and false)
false
&gt; print(false and true)
false
&gt; print(true and false)
false
&gt; print(true and true)
true</pre><p>One way that you can use this is to check if a number is within a range. In the following example <code class="literal">Num &gt; 10</code> is true <span class="emphasis"><em>and</em></span> <code class="literal">Num &lt; 20</code> is true, so the result is true:</p><pre class="programlisting">&gt; Num = 15
&gt; print(Num &gt; 10 and Num &lt; 20)
true</pre><p>If you use operands that aren't Booleans, the behavior of <code class="literal">and</code> is a bit more subtle. Here are some examples—see if you can figure out what rules <code class="literal">and</code> is following in them:</p><pre class="programlisting">&gt; print(false and nil)
false
&gt; print(nil and false)
nil
&gt; print(false and 1)
false
&gt; print(1 and false)
false
&gt; print(nil and 1)
nil
&gt; print(1 and nil)
nil
&gt; print(nil and true)
nil
&gt; print(true and nil)
nil
&gt; print(true and 1)
1
&gt; print(1 and true)
true
&gt; print("a" and 1)
1
&gt; print(1 and "a")
a</pre><p>The more complicated explanation of the <code class="literal">and</code> operator is that if its first operand is <code class="literal">false</code> or <code class="literal">nil</code>, then the first operand is used as the result; otherwise the second operand is used as the result. Mentally apply that rule to the preceding examples to see if you come up with the same answer as Lua.<a id="IDX-CHP-2-0126" class="indexterm"></a><a id="IDX-CHP-2-0127" class="indexterm"></a><a id="IDX-CHP-2-0128" class="indexterm"></a><a id="IDX-CHP-2-0129" class="indexterm"></a><a id="IDX-CHP-2-0130" class="indexterm"></a><a id="IDX-CHP-2-0131" class="indexterm"></a></p><p>Notice that the complicated explanation is the same as the simple explanation if you consider both <code class="literal">false</code> and <code class="literal">nil</code> to be false values and everything else to be true values. There's a distinction here between <code class="literal">true</code> and <code class="literal">false</code>, which are proper names for specific values in Lua, and "true" and "false," which are adjectives. In this book, the adjectives will always be in the same typeface as the surrounding text, and the names will be in <code class="literal">this typeface</code>, like so:</p><p><code class="literal">false</code> and <code class="literal">nil</code> are false. <code class="literal">true</code> and <code class="literal">"Jane Doe"</code> are true.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Remember, <code class="literal">false</code> and <code class="literal">nil</code> are the two false values, and every other value is a true value. This means that, unlike some other languages, the number <code class="literal">0</code> and the empty string are both true.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_or_operator"></a>The or Operator</h2></div></div></div><p>The <code class="literal">or</code> operator gives a false result only if both its operands are false, as follows:</p><pre class="programlisting">&gt; print(false or false)
false
&gt; print(false or true)
true
&gt; print(true or false)
true
&gt; print(true or true)
true</pre><p>Like <code class="literal">and</code>, the result of <code class="literal">or</code> is always one of its operands. If its first operand is something other than <code class="literal">false</code> or <code class="literal">nil</code>, then the first operand is used as the result; otherwise the second operand is used as the result. For example:</p><pre class="programlisting">&gt; print(42 or nil)
42
&gt; print(nil or 42)
42
&gt; print(false or nil)
nil
&gt; print(nil or false)
false
&gt; print("first" or "second")
first
&gt; print(false or "second")
second</pre><p>This behavior comes in handy in the following example.<a id="IDX-CHP-2-0132" class="indexterm"></a><a id="IDX-CHP-2-0133" class="indexterm"></a><a id="IDX-CHP-2-0134" class="indexterm"></a><a id="IDX-CHP-2-0135" class="indexterm"></a><a id="IDX-CHP-2-0136" class="indexterm"></a></p><pre class="programlisting">&gt; print(FavoriteFruit or "apple")
apple
&gt; FavoriteFruit = "kiwi"
&gt; print(FavoriteFruit or "apple")
kiwi</pre><p>The <code class="literal">print</code> line (which occurs twice in the example) is the interesting one here. If there's a favorite fruit, that line prints it. If, however, <code class="literal">FavoriteFruit</code> is uninitialized (and therefore is <code class="literal">nil</code>), there's no favorite fruit, and the default (<code class="literal">"apple"</code>) is printed.</p><p>There can be chains of these, in which case, the result is the first value that is true. Here's an example:</p><pre class="programlisting">&gt; Choice1, Choice2, Choice3 = nil, "pencil", "pen"
&gt; print(Choice1 or Choice2 or Choice3)
pencil</pre><div class="blockquote"><blockquote class="blockquote"><p>Mathematicians consider the <code class="literal">or</code> operator to be the Boolean equivalent of addition, and the <code class="literal">and</code> operator to be the Boolean equivalent of multiplication.</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_not_unary_operator"></a>The not Unary Operator</h2></div></div></div><p>Most of the operators you've learned about so far are <span class="emphasis"><em>binary</em></span>; that is, they take two operands, one to the left of the operator and one to the right. (This meaning of binary is not to be confused with the <span class="emphasis"><em>base-two number system</em></span>.) You've seen one <span class="emphasis"><em>unary</em></span> (a one-operand) operator as well, although you may not have realized it. It's the so-called unary minus, and you've already used it to make negative numbers, like this:<a id="IDX-CHP-2-0137" class="indexterm"></a></p><pre class="programlisting">&gt; print(-50)
-50
&gt; print(-2 + −2)
-4</pre><p>You can also use it to make any positive value negative, or make a negative value positive. :</p><pre class="programlisting">&gt; Two = 2
&gt; print(-Two)
-2
&gt; MinusTwo = -Two
&gt; print(-MinusTwo)
2</pre><p><code class="literal">-</code> is both a binary and a unary operator, but Lua never gets these two uses confused, because it's always visible from the context which one you intended:</p><pre class="programlisting">&gt; print(-13 - −2)
-11</pre><p><code class="literal">and</code> and <code class="literal">or</code> are both binary, but the remaining Boolean operator, <code class="literal">not</code>, is unary. As with <code class="literal">-</code>, the <code class="literal">not</code> operand goes to its right. If that operand is <code class="literal">false</code> or <code class="literal">nil</code>, then the result of <code class="literal">not</code> is <code class="literal">true</code>; otherwise, it's <code class="literal">false</code>:<a id="IDX-CHP-2-0138" class="indexterm"></a></p><pre class="programlisting">&gt; print(not false)
true
&gt; print(not nil)
true
&gt; print(not true)
false
&gt; print(not 50)
false
&gt; print(not "Hello")
false</pre><p>If a true value is preceded by two <code class="literal">not</code>s, the result is <code class="literal">true</code>; if a false value (that is, <code class="literal">false</code> or <code class="literal">nil</code>) is preceded by two <code class="literal">not</code>s, the result is <code class="literal">false</code>:</p><pre class="programlisting">&gt; print(not not true)
true
&gt; print(not not 50)
true
&gt; print(not not "Hello")
true
&gt; print(not not false)
false
&gt; print(not not nil)
false</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="the_concatenation_comma_length_comma_and"></a>The Concatenation, Length, and Modulo Operators</h1></div></div></div><p>There are three other operators you need to know about: concatenation, length, and modulo. You'll examine all three in the following sections.</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_string_concatenation_operator"></a>The String Concatenation Operator</h2></div></div></div><p>The string concatenation operator is written like this: <code class="literal">..</code> (two periods, with no spaces between them). It takes two strings as operands and <span class="emphasis"><em>concatenates</em></span> them, or splices them together. Here are some examples:<a id="IDX-CHP-2-0139" class="indexterm"></a></p><pre class="programlisting">&gt; print("App" .. "le")
Apple
&gt; print("a" .. "b" .. "c" .. "d")
abcd
&gt; Name = "dear reader"
&gt; print("Hello, " .. Name .. ", how are you?")
Hello, dear reader, how are you?</pre><p>The <code class="literal">..</code> operator creates a new string by putting its two operands together with no space between them. If you want a space (or some other separator), explicitly include it in the concatenation, like this:<a id="IDX-CHP-2-0140" class="indexterm"></a><a id="IDX-CHP-2-0141" class="indexterm"></a><a id="IDX-CHP-2-0142" class="indexterm"></a></p><pre class="programlisting">&gt; print("Jane" .. "Doe")
JaneDoe
&gt; print("Jane" .. " " .. "Doe")
Jane Doe</pre><p>As mentioned previously, two strings with the same characters in the same order are the same string. This means that two different concatenations can have equal results. For example:</p><pre class="programlisting">&gt; OneAndTwoThree, OneTwoAndThree = "1" .. "23", "12" .. "3"
&gt; print(OneAndTwoThree, OneTwoAndThree)
123  123
&gt; print(OneAndTwoThree == OneTwoAndThree)
true</pre><p>Concatenating a string to the empty string gives the same string:</p><pre class="programlisting">&gt; print("abcd" .. "" == "abcd")
true</pre></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_length_operator"></a>The Length Operator</h2></div></div></div><p>The length operator <code class="literal">#</code>, like <code class="literal">not</code> and one version of <code class="literal">-</code>, is a unary operator. It measures the length of a string. (It also measures the length of a table, which you'll learn about in <a class="link" href="ch04.html" title="Chapter 4. Working with Tables">Chapter 4</a>.) Take a look at these examples:</p><pre class="programlisting">&gt; print(#"")
0
&gt; print(#"!")
1
&gt; print(#"\n")
1
&gt; print(#"abcd")
4
&gt; VerbForms = "see saw seen"
&gt; print(#VerbForms)
12</pre><p>The length of a string is simply the number of characters in it. (Notice that <code class="literal">"\n"</code> is a single character, even though it is typed as two.)</p><p>Lua considers a character to be exactly one <span class="emphasis"><em>byte</em></span> — a small chunk of memory just big enough to be able to take on one of 256 different values. (To be pedantic, Lua considers a character a C <code class="literal">char</code>, but that will be one byte on any system you're likely to use.) This makes a difference if you're using a character encoding (UTF-8, for example) in which some characters take up more than one byte; the following word looks like it's four characters long, but Lua sees it as five:</p><pre class="programlisting">&gt; print(#"fi_o")
5</pre><p>Lua counts the null byte just like any other character:</p><pre class="programlisting">&gt; NullByte = "\0"
&gt; NullBytes = NullByte .. NullByte .. NullByte
&gt; print(#NullByte)
1
&gt; print(#NullBytes)
3
&gt; print(#"before\0between\0behind")
21</pre><div class="blockquote"><blockquote class="blockquote"><p>Lua 5.0 didn't have the length operator <code class="literal">#</code>. To get the length of a string, use the function <code class="literal">string.len</code>; to get the length of a table, use the function <code class="literal">table.getn</code>.</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_modulo_operator"></a>The Modulo Operator</h2></div></div></div><p>Imagine the hour hand of a clock. If it's pointed at 3 and you turn it two hours forward, it's now pointed at 5. This can be modeled by addition: 3 plus 2 equals 5. But what if, when it's pointed at 5, you turn it 144 hours forward? The answer is that it will still be pointed at 5 because 144 is divisible by 12. After the hour hand passes 12, the addition model breaks down (in this case giving the answer 149). The modulo operator, <code class="literal">%</code>, is good for modeling cyclical things like hours in a day, days in a week, or musical pitches in an octave.<a id="IDX-CHP-2-0143" class="indexterm"></a></p><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="try_it_out_colon_using_percent_to_model"></a>Try It Out: Using % to Model a Clock Face</h3></div></div></div><p>The following example models setting an hour hand to 3, moving it two hours forward, moving it 144 hours forward, and moving it 149 hours backward. For this example, pretend that the top of the clock says 0 instead of 12 (the fact that real clocks go from 1 to 12 rather than 0 to 11 could be adjusted for by adding and subtracting <code class="literal">1</code> at the appropriate points, but that would needlessly complicate this example).</p><pre class="programlisting">&gt; Hour = 3
&gt; Hour = Hour + 2
&gt; Hour = Hour % 12
&gt; print(Hour)
5
&gt; Hour = Hour + 144
&gt; Hour = Hour % 12
&gt; print(Hour)
5
&gt; Hour = Hour - 149
&gt; Hour = Hour % 12
&gt; print(Hour)
0</pre></div><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="how_it_works-002"></a>How It Works</h3></div></div></div><p>The lines where addition or subtraction is done represent turning the hour hand, but they can leave <code class="literal">Hour</code> either too high (greater than or equal to 12) or too low (negative). The lines where <code class="literal">%</code> is used adjust for this. <code class="literal">Hour % 12</code> is pronounced "hour modulo twelve" or "hour mod twelve," and it means "What would <code class="literal">Hour</code> be if I added or subtracted enough 12s so that it was less than 12 and greater than or equal to zero?"<a id="IDX-CHP-2-0144" class="indexterm"></a><a id="IDX-CHP-2-0145" class="indexterm"></a><a id="IDX-CHP-2-0146" class="indexterm"></a><a id="IDX-CHP-2-0147" class="indexterm"></a><a id="IDX-CHP-2-0148" class="indexterm"></a></p><p>For positive numbers (even fractional ones), this is the same as the remainder of a division. For example, <code class="literal">35 % 12</code> is <code class="literal">11</code> because 12 goes into 35 two times with a remainder of 11. This can be used to check whether a number is divisible by another number. For instance, if <code class="literal">X</code> is even, then <code class="literal">X % 2</code> will be <code class="literal">0</code>.</p><p>In other languages, the modulo operators and functions treat negative numbers differently than the Lua <code class="literal">%</code> operator does. The Lua operator follows the definition of modulo most commonly used by mathematicians. One way of stating this definition is as follows:</p><div class="blockquote"><blockquote class="blockquote"><p>To find <code class="literal">X % Y</code>, add <code class="literal">Y</code> to (or subtract it from) <code class="literal">X</code> as many times as necessary until a number between <code class="literal">0</code> and <code class="literal">Y</code> is reached. (This number can be exactly equal to <code class="literal">0</code>, but it cannot be exactly equal to <code class="literal">Y</code>.)</p></blockquote></div><p>This definition allows the clock-face example to work even when <code class="literal">Hour</code> briefly becomes negative.</p><p>As with division by zero, using zero as the second operand of <code class="literal">%</code> is undefined.<a id="IDX-CHP-2-0149" class="indexterm"></a></p><div class="blockquote"><blockquote class="blockquote"><p>Lua 5.0 didn't have the <code class="literal">%</code> operator. Use the function <code class="literal">math.mod</code> instead, but be warned that it has different behavior with negative numbers.</p></blockquote></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="automatic_conversion_of_operands"></a>Automatic Conversion of Operands</h1></div></div></div><p>Some operators (such as <code class="literal">==</code>) can take operands of any type. Other operators (such as <code class="literal">&lt;</code>) expect operands of a certain type and produce an error message if given the wrong type. The arithmetical operators (<code class="literal">+, -, *, /, ^</code>, and <code class="literal">%</code>) fall into this second category, except that they will attempt to convert string operands into numbers, like this:</p><pre class="programlisting">&gt; print("2" + "2")
4</pre><p>The result is still a number, not a string. If the conversion attempt fails, an error message like the following results:<a id="IDX-CHP-2-0150" class="indexterm"></a></p><pre class="programlisting">&gt; print("x" + "y")
stdin:1: attempt to perform arithmetic on a string value
stack traceback:
       stdin:1: in main chunk
       [C]: ?</pre><div class="blockquote"><blockquote class="blockquote"><p>If the string is a hexadecimal number, it must be positive. (Negative hexadecimal numbers may be converted correctly, but this is not guaranteed—it depends on the C library used to compile Lua.)<a id="IDX-CHP-2-0151" class="indexterm"></a><a id="IDX-CHP-2-0152" class="indexterm"></a><a id="IDX-CHP-2-0153" class="indexterm"></a><a id="IDX-CHP-2-0154" class="indexterm"></a></p></blockquote></div><p>The string concatenation operator also does an automatic conversion, from number to string. For example:<a id="IDX-CHP-2-0155" class="indexterm"></a></p><pre class="programlisting">&gt; print(111 .. 999)
111999</pre></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="precedence_and_associativity"></a>Precedence and Associativity</h1></div></div></div><p>You may remember from math class that both <code class="literal">5 * 5 + 1</code> and <code class="literal">1 + 5 * 5</code> give the same result—multiplication is done before addition even if it comes later. Multiplication is therefore said to have a higher <span class="emphasis"><em>precedence</em></span> than addition. However, if you want to do a lower-precedence operation before a higher-precedence one, you can surround the lower-precedence one in parentheses.<a id="IDX-CHP-2-0156" class="indexterm"></a></p><p>The following shows that, no matter what the left-to-right order, multiplication will always be done before addition, unless the addition is wrapped in parentheses, in which case it will be done first:</p><pre class="programlisting">&gt; print(5 * 5 + 1)
26
&gt; print(1 + 5 * 5)
26
&gt; print(5 * (5 + 1))
30
&gt; print((1 + 5) * 5)
30</pre><p>Notice that parentheses are being put to two different uses here—to override precedence and to wrap the thing being printed. These two uses are completely unrelated, but in both cases each open parenthesis must have a corresponding close parenthesis. If the open and close parentheses don't match up, you'll get either an error message or a continuation prompt telling you to finish what you started:</p><pre class="programlisting">&gt; print((1 + 5) * 5))
stdin:1: unexpected symbol near ')'
&gt; print(5 * (5 + 1)
&gt;&gt;</pre><p>What about two operators that have the same precedence? In some cases, it doesn't matter what order they're done in: <code class="literal">(2 + 3) + 4</code> and <code class="literal">2 + (3 + 4)</code> are both <code class="literal">9</code>. But how about <code class="literal">2 - 3 + 4</code>? This will give a different answer depending on whether the subtraction or the addition is done first, and precedence can't be used to decide this because addition and subtraction have the same precedence. In this case, the subtraction is done first because it's on the left, and <code class="literal">+</code> and <code class="literal">-</code> are both <span class="emphasis"><em>left-associative</em></span> operators. Anytime two operators are the same precedence, they are done from left to right if they're left associative, and right to left if they're right associative. Lua only has two right-associative operators: <code class="literal">..</code> (string concatenation) and <code class="literal">^</code> (exponentiation). (That's not counting unary operators, which are done from right to left because that's the only way that makes sense.)<a id="IDX-CHP-2-0157" class="indexterm"></a><a id="IDX-CHP-2-0158" class="indexterm"></a></p><p>The following chart lists all of Lua's operators, from highest precedence to lowest. (All operators are binary unless marked as unary, and all binary operators are left associative unless marked as right associative.)</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">^</code> (exponentiation; right-associative)</p></li><li class="listitem"><p><code class="literal">not</code> (Boolean negation; unary), <code class="literal">-</code> (unary minus), <code class="literal">#</code> (length; unary)</p></li><li class="listitem"><p><code class="literal">*</code> (multiplication), <code class="literal">/</code> (division), <code class="literal">%</code> (modulo)</p></li><li class="listitem"><p><code class="literal">+</code> (addition), <code class="literal">-</code> (subtraction)</p></li><li class="listitem"><p><code class="literal">..</code> (string concatenation; right-associative)</p></li><li class="listitem"><p><code class="literal">&lt;</code> (less than), <code class="literal">&gt;</code> (greater than), <code class="literal">~=</code> (not equal to), <code class="literal">&lt;=</code> (less than or equal to), <code class="literal">==</code> (equal to), <code class="literal">&gt;=</code> (greater than or equal to)</p></li><li class="listitem"><p><code class="literal">and</code> (Boolean "multiplication")</p></li><li class="listitem"><p><code class="literal">or</code> (Boolean "addition")</p></li></ul></div><p>Most experienced programmers do not memorize this whole chart, nor do they check it every time they can't remember a precedence. Rather, they memorize a handful of the most commonly used precedences and use parentheses for anything they're not sure of. It doesn't hurt to add parentheses even if they're not strictly necessary according to the precedence chart, and it often makes your code easier for you and others to understand.</p><p>On the other hand, Lua's precedence chart is well thought out, and many common idioms do not require parentheses. For example, relational operators have comparatively low precedence, which means that arithmetic results don't need to be wrapped in parentheses before being compared:</p><pre class="programlisting">&gt; CreditA, DebitA, CreditB, DebitB = 1000, 150, 500, 25
&gt; print(CreditA - DebitA == CreditB - DebitB)
false
&gt; print(CreditA - DebitA &gt; CreditB - DebitB)
true</pre><p><code class="literal">and</code> and <code class="literal">or</code> both have very low precedence, so you don't need to wrap comparisons in parentheses before using <code class="literal">and</code> or <code class="literal">or</code>:</p><pre class="programlisting">&gt; CreditA, DebitA, CreditB, DebitB = 1000, 150, 500, 505
&gt; print(CreditA &gt;= DebitA and CreditB &gt;= DebitB)
false
&gt; print(CreditA &gt;= DebitA or CreditB &gt;= DebitB)
true</pre><p><code class="literal">and</code> has higher precedence than <code class="literal">or</code>, so you can use <code class="literal">A and B or C</code> to mean "if <code class="literal">A</code>, then <code class="literal">B</code>, otherwise <code class="literal">C</code>."</p><p>Here's the <code class="literal">A and B or C</code> trick in action:<a id="IDX-CHP-2-0159" class="indexterm"></a><a id="IDX-CHP-2-0160" class="indexterm"></a></p><pre class="programlisting">&gt; B, C = "B was chosen", "C was chosen"
&gt; A = true
&gt; print(A and B or C)
B was chosen
&gt; A = false
&gt; print(A and B or C)
C was chosen</pre><p><code class="literal">A</code> is <code class="literal">and</code>ed with <code class="literal">B</code> and the result (<code class="literal">A</code> if <code class="literal">A</code> is false, otherwise <code class="literal">B</code>) is <code class="literal">or</code>ed with <code class="literal">C</code>. The upshot is that whether <code class="literal">A</code> is true or false determines whether the result is <code class="literal">B</code> or <code class="literal">C</code>. This would have worked the same if <code class="literal">A</code> had been set to any true value instead of <code class="literal">true</code>, or <code class="literal">nil</code> instead of <code class="literal">false</code>. It would not have worked, though, if <code class="literal">B</code> had been <code class="literal">nil</code> or <code class="literal">false</code>:</p><pre class="programlisting">&gt; B, C = false, "C was chosen"
&gt; A = true
&gt; print(A and B or C)
&gt; was chosen</pre><p>This is a limitation of this idiom—the middle value must be true.</p></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="variables_and_values"></a>Variables and Values</h1></div></div></div><p>Earlier you read that variables are like named cubbyholes or containers for values. This means that the following assignment finds the three cubbyholes <code class="literal">Number, Greeting1</code>, and <code class="literal">Greeting2</code> (creating them if they don't already exist) and puts <code class="literal">123</code> in <code class="literal">Number, "Hello"</code> in <code class="literal">Greeting1</code>, and <code class="literal">"Hello"</code> in <code class="literal">Greeting2</code>:</p><pre class="programlisting">Number, Greeting1, Greeting2 = 123, "Hello", "Hello"</pre><p>This is illustrated in <a class="link" href="ch02.html#figure_2-1" title="Figure 2.1. Figure 2-1">Figure 2-1</a></p><div class="figure"><a id="figure_2-1"></a><div class="figure-contents"><div><img src="https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/figs/0201.png" height="110" alt="Figure 2-1" width="502"></div></div><p class="title"><strong>Figure 2.1. Figure 2-1</strong></p></div><p>For everything you've done and will do in this chapter, that's a perfectly accurate mental model, but later you'll run into situations where it would lead you astray. Before you get it too ingrained in your head, a somewhat more accurate model is that the following finds the three names <code class="literal">Number, Greeting1</code>, and <code class="literal">Greeting2</code> (creating them if they don't already exist) and points <code class="literal">Number</code>'s arrow at <code class="literal">123</code> and <code class="literal">Greeting1</code>'s and <code class="literal">Greeting2</code>'s arrows at <code class="literal">"Hello"</code>:</p><pre class="programlisting">Number, Greeting1, Greeting2 = 123, "Hello", "Hello"</pre><p>This is illustrated in <a class="link" href="ch02.html#figure_2-2" title="Figure 2.2. Figure 2-2">Figure 2-2</a></p><div class="figure"><a id="figure_2-2"></a><div class="figure-contents"><div><img src="https://learning.oreilly.com/library/view/beginning-lua-programming/9780470069172/figs/0202.png" height="142" alt="Figure 2-2" width="419"></div></div><p class="title"><strong>Figure 2.2. Figure 2-2</strong></p></div><p>The difference is that instead of <code class="literal">Greeting1</code> and <code class="literal">Greeting2</code> each containing <code class="literal">"Hello"</code>, they only point to it. <a class="link" href="ch04.html" title="Chapter 4. Working with Tables">Chapter 4</a> explains why this is important.</p></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="comments"></a>Comments</h1></div></div></div><p>If Lua sees two consecutive hyphens outside of a string, it considers everything until the end of that line a <span class="emphasis"><em>comment</em></span> and ignores it. For example:</p><pre class="programlisting">&gt; print("Hello") -- This is a comment.
Hello
&gt; print("Goodbye") -- So is this.
Goodbye</pre><p>Comments are useful to explain your code's purpose to other programmers (or to remind yourself when you return to the code after a few months). Whenever you change your code, make certain you update your comments appropriately.<a id="IDX-CHP-2-0161" class="indexterm"></a></p><p>Comments can also be used to temporarily comment out code that you want Lua to ignore but don't want to delete entirely, like this:</p><pre class="programlisting">&gt; -- print("Hello")
&gt;</pre><p>If the two hyphens are immediately followed by an open square bracket, zero or more equal signs, and another open square bracket, then Lua uses the rules described previously for long strings (square bracket strings) to ignore the following text (including the rule about nested sets of square brackets needing different numbers of equal signs). This is most often used for multiline comments such as the following:<a id="IDX-CHP-2-0162" class="indexterm"></a></p><pre class="programlisting">&gt; --[[ This is
&gt;&gt; a multi-line
&gt;&gt; comment.]]
&gt;</pre><p>It can also be used to temporarily comment out code in the middle of a line, like this:</p><pre class="programlisting">&gt; print(2 + --[[2 +]] 2)
4</pre><p>Or to temporarily comment out multiple lines of code, like this:</p><pre class="programlisting">&gt; --[[
&gt;&gt; print("Multiple")
&gt;&gt; print("lines.")
&gt;&gt; --]]
&gt;</pre><p>Notice that the closing brackets have <code class="literal">--</code> in front of them. This lets you add a single <code class="literal">-</code> in front of the opening brackets (turning that line into a single-line comment rather than the start of a multiline comment) without the closing brackets causing an error:</p><pre class="programlisting">&gt; ---[[
&gt; print("Multiple")
Multiple
&gt; print("lines.")
lines.
&gt; --]]
&gt;</pre><p>That looks pretty silly typed into the interpreter, but you'll find it useful for debugging when you start saving code to (and executing it from) files.</p><p>Even though code typed directly into the interpreter is normally short-lived and not commented, much of the following example code is commented for your benefit.</p></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="expressions_and_statements"></a>Expressions and Statements</h1></div></div></div><p>For most of this chapter, you've been using expressions and statements. For the rest of the chapter to make sense, these terms need to be defined.<a id="IDX-CHP-2-0163" class="indexterm"></a></p><p>An <span class="emphasis"><em>expression</em></span> is something that has a value. As you've used <code class="literal">print</code>, you've been putting expressions (separated by commas when there is more than one) between its parentheses. An expression can be a <span class="emphasis"><em>literal</em></span> value, such as a quoted string, <code class="literal">true, false</code>, or <code class="literal">nil</code>. <span class="emphasis"><em>Literal</em></span> means that you can tell just by looking at it what it is. For example, a variable named <code class="literal">Count</code> may contain a number (and probably does, given its name), but it's not a literal number, like <code class="literal">42</code> is.<a id="IDX-CHP-2-0164" class="indexterm"></a><a id="IDX-CHP-2-0165" class="indexterm"></a><a id="IDX-CHP-2-0166" class="indexterm"></a><a id="IDX-CHP-2-0167" class="indexterm"></a><a id="IDX-CHP-2-0168" class="indexterm"></a></p><p>An expression can also be a variable name, like <code class="literal">Count</code>. It can also be an expression preceded by a unary operator, an expression wrapped in parentheses, or two expressions separated by a binary operator. For example, <code class="literal">-Count</code> is an expression because <code class="literal">Count</code> is an expression, and an expression preceded by a unary operator is also an expression. <code class="literal">2 + 3</code> is an expression because <code class="literal">2</code> and <code class="literal">3</code> are expressions, and separating two expressions with a binary operator makes another expression. Take a look at the following example:</p><pre class="programlisting">Count &gt; 5 and #(FirstNameStr .. LastNameStr) &lt;= 20</pre><p>Even a complicated expression like this can be explained as the literals <code class="literal">5</code> and <code class="literal">20</code> and the variable names <code class="literal">Count, FirstNameStr</code>, and <code class="literal">LastNameStr</code> combined according to the preceding rules.</p><p>There are other rules for making expressions, but these are the only ones relevant to this chapter.</p><p>A <span class="emphasis"><em>statement</em></span> is the smallest complete unit of Lua code. A Lua program is simply one or more statements (actually zero or more, because if you enter an empty line into the interpreter, you're executing a valid program that does nothing). Lua doesn't know what to do with an expression unless it's wrapped in a statement such as the following:</p><pre class="programlisting">&gt; 2 + 2
stdin:1: unexpected symbol near '2'
&gt; print(2 + 2)
4</pre><p>As this example implies, <code class="literal">print(...)</code> is a statement. Assignment is also a statement, and these are the only two types of statement you've learned about so far in this chapter. You'll learn more in the next section.</p><div class="blockquote"><blockquote class="blockquote"><p>For the most part, expressions and statements are two different things. There is one type of expression that can be used as a statement, and you'll learn about it next chapter.</p></blockquote></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="compound_statements"></a>Compound Statements</h1></div></div></div><p><span class="emphasis"><em>Compound statements</em></span> are statements that can contain other statements. The following sections describe five of Lua's compound statements: the <span class="emphasis"><em>if</em></span> statement; the <span class="emphasis"><em>while, for</em></span>, and <span class="emphasis"><em>repeat</em></span> loops; and the <span class="emphasis"><em>do</em></span> statement.</p><p>At any time during the execution of a program, a certain part of the program is in control. By default, control flows from each statement to the one after it, but most compound statements are <span class="emphasis"><em>control structures</em></span>, so-named because they are structures (with multiple parts), and they alter the flow of control. The <span class="emphasis"><em>if</em></span> statement is one of these control structures.<a id="IDX-CHP-2-0169" class="indexterm"></a></p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_if_statement"></a>The if Statement</h2></div></div></div><p>Say you have two strings, <code class="literal">Str1</code> and <code class="literal">Str2</code>, and you want to concatenate them in (the <code class="literal">&lt;</code> operator's version of) alphabetical order. To do so, you need to test whether <code class="literal">Str1</code> comes before <code class="literal">Str2</code> and, if it does, concatenate them with <code class="literal">Str1</code> first, but otherwise concatenate them with <code class="literal">Str2</code> first. You already know enough to do this, if you use the <code class="literal">A and B or C</code> trick described earlier. Give it a try.</p><p>You should come up with the following:</p><pre class="programlisting">&gt; Str1, Str2 = "aardvark", "zebra"
&gt; print(Str1 &lt; Str2 and Str1 .. Str2 or Str2 .. Str1)
aardvarkzebra
&gt;
&gt; Str1, Str2 = "zebra", "aardvark"
&gt; print(Str1 &lt; Str2 and Str1 .. Str2 or Str2 .. Str1)
aardvarkzebra</pre><p>There's another way to do this, using the <code class="literal">if</code> control structure.</p><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="try_it_out_colon_using_if_to_make_a_choi"></a>Try It Out: Using if to Make a Choice</h3></div></div></div><p>The <code class="literal">if</code> version is a bit wordier but, at least in this case, it's easier to read, and it scales up more easily to more complicated things. Here's the code:</p><pre class="programlisting">&gt; Str1, Str2 = "aardvark", "zebra"
&gt; if Str1 &lt; Str2 then
&gt;&gt; print(Str1 .. Str2)
&gt;&gt; else
&gt;&gt; print(Str2 .. Str1)
&gt;&gt; end
aardvarkzebra
&gt; -- Do it again with the strings swapped:
&gt; Str1, Str2 = "zebra", "aardvark"
&gt; if Str1 &lt; Str2 then
&gt;&gt; print(Str1 .. Str2)
&gt;&gt; else
&gt;&gt; print(Str2 .. Str1)
&gt;&gt; end
aardvarkzebra</pre></div><div class="sect3"><div class="titlepage"><div><div><h3 class="title"><a id="how_it_works-003"></a>How It Works</h3></div></div></div><p>In English: If the two strings are in the right order, then print them; otherwise, print them in reverse order.</p><p>The <code class="literal">if</code> control structure has the following form:<a id="IDX-CHP-2-0170" class="indexterm"></a></p><pre class="programlisting">if <em class="replaceable"><code>an expression</code></em> then
  <em class="replaceable"><code>zero or more statements</code></em>
else
  <em class="replaceable"><code>zero or more statements</code></em>
end</pre><p>The expression is <span class="emphasis"><em>evaluated</em></span>, that is, its value is checked. If the value is true (that is, something other than <code class="literal">false</code> or <code class="literal">nil</code>), then only the statements between the <code class="literal">then</code> and the <code class="literal">else</code> are executed; if the expression is false (that is, <code class="literal">false</code> or <code class="literal">nil</code>) then only the statements between the <code class="literal">else</code> and the <code class="literal">end</code> are executed.</p><p>An <code class="literal">if</code> statement doesn't have to be spread out across several lines. If it's not too long, you can fit it on one line. If you do spread it across several lines, indent the statements before and after the <code class="literal">else</code>, as the preceding example shows. Lua doesn't care about indentation, but humans find it much easier to read properly indented code.</p><p>If you have no statements to put in the <code class="literal">else</code> clause (the part between the <code class="literal">else</code> and the <code class="literal">end</code>), just leave the <code class="literal">else</code> out. For example:</p><pre class="programlisting">if not Asdf then print("Asdf is false") end

if "X" .. "Y" .. "Z" == "XYZ" then
  Name = "Virginia"
  print("Yes, " .. Name .. ", it's \"XYZ\"")
end</pre><p>It's possible to rewrite the alphabetical concatenation example with no <code class="literal">else</code> clause. Give it a try before you look at the following example. (Hint: the <code class="literal">print</code> statement needs to come after the <code class="literal">end</code>.)</p><pre class="programlisting">&gt; Str1, Str2 = "aardvark", "zebra"
&gt; if Str1 &gt; Str2 then
&gt;gt;    Str1, Str2 = Str2, Str1
&gt;&gt; end
&gt; print(Str1 .. Str2)
aardvarkzebra
&gt; -- Do it again with the strings swapped:
&gt; Str1, Str2 = "zebra", "aardvark"
&gt; if Str1 &gt; Str2 then
&gt;&gt;   Str1, Str2 = Str2, Str1
&gt;&gt; end
&gt; print(Str1 .. Str2)
aardvarkzebra</pre><p>In English: If the two strings are in the wrong order, swap them. Then print them (whether they were swapped or not).</p><p>This code does one thing if <code class="literal">Str1</code> is greater than <code class="literal">Str2</code> and does something else if <code class="literal">Str1</code> is less than or equal to <code class="literal">Str2</code>. Similarly, the first version does one thing if <code class="literal">Str1</code> is less than <code class="literal">Str2</code> and something else if <code class="literal">Str1</code> is greater than or equal to <code class="literal">Str2</code>. Because an <code class="literal">if</code> structure is a statement, it can be put inside a <code class="literal">then</code> clause or an <code class="literal">else</code> clause. This fact can be used to do one thing if <code class="literal">Str1</code> is less than <code class="literal">Str2</code>, another thing if <code class="literal">Str1</code> is greater than <code class="literal">Str2</code>, and yet another if they are equal. Write a version that concatenates <code class="literal">Str1</code> and <code class="literal">Str2</code> in order as before if they are inequal, but only prints one of them if they are equal. This means that the following:</p><pre class="programlisting">Str1, Str2 = "aardvark", "aardvark"</pre><p>should result in this:</p><pre class="programlisting">aardvark</pre><p>After you've written your code, test it and make sure it works. Testing it in this case means trying it out with all three cases: two strings in the right order, two strings in the wrong order, and two identical strings.</p><p>There are several correct ways to write this code. Here's one:</p><pre class="programlisting">if Str1 == Str2 then
  -- Str2 is a duplicate of Str1; replace it with the
  -- empty string:
  Str2 = ""
else
  if Str1 &gt; Str2 then
    -- They're in the wrong order; swap 'em:
    Str1, Str2 = Str2, Str1
  end
end
print(Str1 .. Str2)</pre><p>Because the inner <code class="literal">if</code> doesn't have an <code class="literal">else</code>, the strings are only executed if one of the two tests turns out true; if not, none of the statements except the final <code class="literal">print</code> is executed.</p><p>Notice that the contents of the outer <code class="literal">if</code> statement's <code class="literal">then</code> and <code class="literal">else</code> clauses are indented one level (which is two spaces in this book), and the inner <code class="literal">if</code> statement's <code class="literal">then</code> clause is indented one more level.</p><p>If an <code class="literal">if</code> statement is nested inside the <code class="literal">else</code> clause of another <code class="literal">if</code> statement, Lua allows them to be combined into one <code class="literal">if</code> statement using the keyword <code class="literal">elseif</code>.</p><p>Here's the nested-<code class="literal">if</code> version of alphabetical concatenation rewritten using <code class="literal">elseif</code>:</p><pre class="programlisting">if Str1 == Str2 then
  -- Str2 is a duplicate of Str1; replace it with the
  -- empty string:
  Str2 = ""
elseif Str1 &gt; Str2 then
  -- They're in the wrong order; swap 'em:
  Str1, Str2 = Str2, Str1
end
print(Str1 .. Str2)</pre><p>The <code class="literal">elseif</code> test (to see if the strings are in the wrong order) is only done if the <code class="literal">if</code> test (to see if the strings are equal) turned out false.<a id="IDX-CHP-2-0171" class="indexterm"></a><a id="IDX-CHP-2-0172" class="indexterm"></a><a id="IDX-CHP-2-0173" class="indexterm"></a><a id="IDX-CHP-2-0174" class="indexterm"></a></p><p>An <code class="literal">if</code> statement can have zero or more <code class="literal">elseif</code>s, and zero or one <code class="literal">else</code>. If there is an <code class="literal">else</code>, it has to be the last part of the <code class="literal">if</code>:</p><pre class="programlisting">if N == 1 then
  print("N is one")
elseif N == 2 then
  print("N is two")
elseif N == 3 then
  print("N is three")
else
  print("N is neither one nor two nor three")
end</pre><p>In an <code class="literal">if</code> like this, the test expressions (right before <code class="literal">then</code>) are evaluated from the first one downward, until the first true one is found, at which point the next statement block (the part between the <code class="literal">then</code> and the next <code class="literal">elseif, else</code>, or <code class="literal">end</code>) is executed, and the <code class="literal">if</code> is exited. The statement block after the <code class="literal">else</code> is only executed if none of the test expressions are true. In this example, you can tell at a glance that only one of the <code class="literal">print</code>s will be executed.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_while_loop"></a>The while Loop</h2></div></div></div><p>The <code class="literal">if</code> control structure gives a program the power to decide <span class="emphasis"><em>whether</em></span> something gets executed. Lua's other control structures—<code class="literal">while, repeat</code>, and <code class="literal">for</code>—give a program the power to decide <span class="emphasis"><em>how many times</em></span> something gets executed. They are called <span class="emphasis"><em>loops</em></span>, and the simplest is <code class="literal">while</code>, whose form is as follows:</p><pre class="programlisting">while <em class="replaceable"><code>an expression do</code></em>
  <em class="replaceable"><code>zero or more statements</code></em>
end</pre><p>The expression is evaluated. If it's true, the statements between <code class="literal">do</code> and <code class="literal">end</code> are executed, and then the expression is evaluated again. If it is still true, the statements are executed again, and the cycle continues. If the expression evaluates as false at any time (including the first time it's evaluated), the <code class="literal">while</code> statement is exited, which means that the statements are not executed and the expression is not evaluated again. For example, the following code does nothing:</p><pre class="programlisting">while false do
  print("This will")
  print("never print.")
end</pre><p>On the other hand, here's an example that will run forever —(or until you stop it by pressing Ctrl+C):</p><pre class="programlisting">while true do
  print("It keeps")
  print("going and going.")
end</pre><p>More interesting cases are those where the expression starts out true, and then becomes false, like in the following example, which uses <code class="literal">while</code> to count to 10:<a id="IDX-CHP-2-0175" class="indexterm"></a><a id="IDX-CHP-2-0176" class="indexterm"></a></p><pre class="programlisting">&gt; Counter = 1
&gt; while Counter &lt;= 10 do
&gt;&gt;    print(Counter)
&gt;&gt;    Counter = Counter + 1
&gt;&gt;  end
1
2
3
4
5
6
7
8
9
10
&gt;</pre><p>Here, <code class="literal">Counter</code> is set to <code class="literal">1</code>, and as long as it's less than or equal to 10, it is printed and then <span class="emphasis"><em>incremented</em></span> (increased by one). At the end of the tenth time through the loop, <code class="literal">Counter</code> is set to 11. The test—whether <code class="literal">Counter</code> is less than or equal to 10—is done an eleventh time, this time with a false result, which means the loop is done.</p><p>A <span class="emphasis"><em>factorial</em></span> is a number formed by multiplying a sequence of consecutive integers starting with 1. For example, the factorial of 5 (notated by mathematicians as "5!") is 1×2×3×4×5, or 120. (Apart from their use in the mathematical field of combinatorics, factorials are quite handy for writing examples in programming books.)<a id="IDX-CHP-2-0177" class="indexterm"></a></p><p>The following code prints all the factorials less than 100:</p><pre class="programlisting">&gt; N, F = 1, 1
&gt; while F &lt; 100 do
&gt;&gt;    print(N .. "! is " .. F)
&gt;&gt;    N = N + 1
&gt;&gt;    -- Compute the factorial of the new N based on
&gt;&gt;    -- the factorial of the old N:
&gt;&gt;    F = F * N
&gt;&gt;  end
1! is 1
2! is 2
3! is 6
4! is 24</pre><p>The first line <span class="emphasis"><em>initializes</em></span> (gives initial values to) <code class="literal">N</code> and <code class="literal">F</code>, setting <code class="literal">N</code> to <code class="literal">1</code> and <code class="literal">F</code> to the factorial of <code class="literal">1</code>, which also happens to be <code class="literal">1</code>. The expression after <code class="literal">while</code> makes sure that <code class="literal">F</code> is less than 100. Inside the loop's body, <code class="literal">N</code> and <code class="literal">F</code> are printed, <code class="literal">N</code> is incremented, and the factorial of the new value of <code class="literal">N</code> is computed, using the fact that <code class="literal">n!</code> equals <code class="literal">(n - 1)!</code>!×n.</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_for_loop"></a>The for Loop</h2></div></div></div><p>One difference between the factorial loop and the 1-to-10 loop is that you knew the 1-to-10 loop's body would be executed 10 times, but you didn't know how many times the factorial loop's body would be executed (unless you figured the factorials out in your head). To know when to exit the loop, Lua had to compute 4!, see that it was less than 100, and then compute 5! and see that it was not less than 100. The <code class="literal">while</code> loop is for situations where you don't know how many times you want the loop to repeat. When you do know how many times you want the loop to repeat, use Lua's <code class="literal">for</code> loop. (It's called <code class="literal">for</code> because it does things <span class="emphasis"><em>for</em></span> a certain number of times.)<a id="IDX-CHP-2-0178" class="indexterm"></a><a id="IDX-CHP-2-0179" class="indexterm"></a><a id="IDX-CHP-2-0180" class="indexterm"></a></p><p>Here's the 1-to-10 loop rewritten with <code class="literal">for</code>:</p><pre class="programlisting">&gt; for Counter = 1, 10 do
&gt;&gt;    print(Counter)
&gt;&gt;  end
1
2
3
4
5
6
7
8
9
10</pre><p>Notice how much simpler it is than the first version. The <code class="literal">for</code> loop has the following form:</p><pre class="programlisting">for <em class="replaceable"><code>variable</code></em> = <em class="replaceable"><code>start number</code></em>, <em class="replaceable"><code>end number</code></em>, <em class="replaceable"><code>step</code></em> do
  <em class="replaceable"><code>zero or more statements</code></em>
end</pre><p>The value <code class="literal">start number</code> is assigned to <code class="literal">variable</code>, the <code class="literal">zero or more statements</code> are executed, <code class="literal">step</code> is added to <code class="literal">variable</code> (<code class="literal">step</code> is optional and usually left out, in which case <code class="literal">1</code> is used), and if <code class="literal">variable</code> is still less than or equal to <code class="literal">end number</code>, then the loop body is executed again.</p><p>If Lua sees that the variable will never either reach or go beyond <em class="replaceable"><code>end number</code></em>, then the body is never executed:</p><pre class="programlisting">&gt; for N = 1, 0 do
&gt;&gt;   print(N)
&gt;&gt; end
&gt;</pre><p>The right thing is done for negative and fractional values and cases where the difference between the start number and the end number is not divisible by the step value:</p><pre class="programlisting">&gt; for N = 3, 1, −1 do
&gt;&gt;   print(N)
&gt;&gt; end
3
2
1
&gt; for N = −50, −45.25, 2.5 do
&gt;&gt;   print(N)
&gt;&gt; end
-50
-47.5
&gt; for N = 2, 5, 2 do
&gt;&gt;   print(N)
&gt;&gt; end
2
4</pre><p>The start number, end number, and step value don't need to be, and often aren't, literal numbers—they can be any expressions that evaluate to numbers. This evaluation takes place once, at the beginning of the loop (unlike a <code class="literal">while</code> loop's test expression, which is evaluated over and over as the loop loops). That's why the following example loops five times, even though <code class="literal">End</code> gets lower and lower:</p><pre class="programlisting">&gt; <strong class="userinput"><code>End = 5</code></strong>
&gt;  <strong class="userinput"><code>for I = 1, End do</code></strong>
&gt;&gt;    <strong class="userinput"><code>End = End - 1 -- The loop doesn't care that End is being</code></strong>
&gt;&gt;       <strong class="userinput"><code>-- changed</code></strong>.
&gt;&gt;    <strong class="userinput"><code>print("I is " .. I .. " and End is " .. End)</code></strong>
&gt;&gt;  <strong class="userinput"><code>end</code></strong>
I is 1 and End is 4
I is 2 and End is 3
I is 3 and End is 2
I is 4 and End is 1
I is 5 and End is 0</pre><p><code class="literal">for</code> loops can be nested inside each other. For example:</p><pre class="programlisting">&gt; for Outer = 1, 3 do
&gt;&gt;    for Inner = 1, 3 do
&gt;&gt;      print("Outer: " .. Outer .. "; Inner: " .. Inner)
&gt;&gt;    end
&gt;&gt;  end
Outer: 1; Inner: 1
Outer: 1; Inner: 2
Outer: 1; Inner: 3
Outer: 2; Inner: 1
Outer: 2; Inner: 2
Outer: 2; Inner: 3
Outer: 3; Inner: 1
Outer: 3; Inner: 2
Outer: 3; Inner: 3</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>A common mistake is to forget the <code class="literal">do</code> after a <code class="literal">for</code> or <code class="literal">while</code>, or the <code class="literal">then</code> after an <code class="literal">if</code> or <code class="literal">elseif</code>. If you do this, you'll get an error message:<a id="IDX-CHP-2-0181" class="indexterm"></a><a id="IDX-CHP-2-0182" class="indexterm"></a><a id="IDX-CHP-2-0183" class="indexterm"></a></p><pre class="programlisting">&gt; for N = 1, 10
&gt;&gt;    print(N)

stdin:2: 'do' expected near 'print'</pre></div><p>Another way to say something loops is to say that it <span class="emphasis"><em>iterates</em></span>. Looping in general is called iteration, but each time the body of a loop is executed is called <span class="emphasis"><em>an</em></span> iteration.</p><p>On each iteration of a <code class="literal">for</code> loop, there's an implicit assignment to the <span class="emphasis"><em>loop variable</em></span> (the variable named right after <code class="literal">for</code>). This variable has a behavior that you might not expect. In the following example, <code class="literal">N</code> is used both outside the loop and as a loop variable:</p><pre class="programlisting">&gt; N = "outside"
&gt; for N = 1, 3 do
&gt;&gt;   print(N)
&gt;&gt; end
1
2
3
&gt; print(N)
outside</pre><p>The outside value of <code class="literal">N</code> was unaffected by the numbers that were assigned to <code class="literal">N</code> inside the loop. A <code class="literal">for</code> loop's variable is only visible inside the loop—if you look at it outside the loop, you'll get any value it was given outside the loop (<code class="literal">nil</code> if it hasn't been given a value outside the loop). This is because the <code class="literal">N</code> inside the loop and the <code class="literal">N</code> outside the loop are actually two different variables —they're in two different <span class="emphasis"><em>scopes</em></span>. (You learn more about this in the next chapter.)</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_repeat_loop"></a>The repeat Loop</h2></div></div></div><p>The <code class="literal">repeat</code> loop is different in three ways from the <code class="literal">while</code> loop:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Its expression is tested <span class="emphasis"><em>after</em></span> its body (the statements between <code class="literal">do</code> and <code class="literal">end</code>), which means that the body is always executed at least once.</p></li><li class="listitem"><p>The sense of the test is reversed—the <code class="literal">while</code> loop keeps going <span class="emphasis"><em>while</em></span> the expression is true; the <code class="literal">repeat</code> loop, whose expression comes after the keyword <code class="literal">until</code>, keeps going <span class="emphasis"><em>until</em></span> the expression is true.</p></li><li class="listitem"><p>A <code class="literal">repeat</code> loop, unlike a <code class="literal">while</code> (or any other compound statement for that matter), does not end with the keyword <code class="literal">end</code>.</p></li></ul></div><p>Here's the factorial example rewritten to use a <code class="literal">repeat</code> loop:<a id="IDX-CHP-2-0184" class="indexterm"></a><a id="IDX-CHP-2-0185" class="indexterm"></a><a id="IDX-CHP-2-0186" class="indexterm"></a><a id="IDX-CHP-2-0187" class="indexterm"></a><a id="IDX-CHP-2-0188" class="indexterm"></a><a id="IDX-CHP-2-0189" class="indexterm"></a></p><pre class="programlisting">&gt; N, F = 1, 1
&gt; repeat
&gt;&gt;    print(N .. "! is " .. F)
&gt;&gt;    -- Compute the next N and its factorial:
&gt;&gt;    N = N + 1
&gt;&gt;    F = F * N
&gt;&gt;  until F &gt;= 100
1! is 1
2! is 2
3! is 6
4! is 24</pre><p>There's sort of an incipient bug in this version. It is that if you had wanted to see all factorials less than 1, then the <code class="literal">while</code> version would have given you the correct answer (none), but the <code class="literal">repeat</code> version would have incorrectly printed like this:</p><pre class="programlisting">1! is 1</pre><p>That's why you only use <code class="literal">repeat</code> when you know that you want the loop's body to be executed at least one time.</p><div class="blockquote"><blockquote class="blockquote"><p>The <code class="literal">repeat</code> loop is the least commonly used control structure. There are a few examples of it in <a class="link" href="ch18.html" title="Chapter 18. Carrying Lua with You">Chapter 18</a>.</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="the_break_and_do_statements"></a>The break and do Statements</h2></div></div></div><p>The <code class="literal">break</code> statement exits a <code class="literal">while, for</code>, or <code class="literal">repeat</code> loop prematurely. For example:</p><pre class="programlisting">&gt; for N = 1, 10 do
&gt;&gt;   if N &gt; 5 then
&gt;&gt;     break
&gt;&gt;   end
&gt;&gt;   print(N)
&gt;&gt; end
1
2
3
4
5
&gt;</pre><p>If a <code class="literal">break</code> is inside more than one loop, it only breaks out of the innermost one as follows:</p><pre class="programlisting">&gt; for Outer = 1, 3 do
&gt;&gt;  for Inner = 101, 103 do
&gt;&gt;    print("Outer: " .. Outer .. "; Inner: " .. Inner)
&gt;&gt;    if Inner == 102 then
&gt;&gt;      print("Breaking out of inner loop; 103 won't be reached.")
&gt;&gt;      break
&gt;&gt;    end
&gt;&gt;   end
&gt;&gt; end
Outer: 1; Inner: 101
Outer: 1; Inner: 102
Breaking out of inner loop; 103 won't be reached.
Outer: 2; Inner: 101
Outer: 2; Inner: 102
Breaking out of inner loop; 103 won't be reached.
Outer: 3; Inner: 101
Outer: 3; Inner: 102
Breaking out of inner loop; 103 won't be reached.</pre><p>Use <code class="literal">break</code> with caution; sometimes it's the simplest way to do what you want, but more often it makes code hard to understand. If the following loop has no <code class="literal">break</code>s in it, you can tell at a glance that it will execute 10 times:</p><pre class="programlisting">for Times = 1, 10 do
  <em class="replaceable"><code>A bunch</code></em>
  <em class="replaceable"><code>of code</code></em>
  <em class="replaceable"><code>goes here</code></em>.
end</pre><p>But if the line <code class="literal">if Times == 5 then break end</code> is in the middle, the loop will execute 4½ times, which is a bit harder to hold in your head while you're looking for a bug.</p><p>A <code class="literal">break</code> must be the last statement in a <span class="emphasis"><em>block</em></span>. A block is a group of statements between the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">do</code> and <code class="literal">end</code></p></li><li class="listitem"><p><code class="literal">repeat</code> and <code class="literal">until</code></p></li><li class="listitem"><p><code class="literal">then</code> and <code class="literal">elseif, else</code>, or <code class="literal">end</code></p></li><li class="listitem"><p><code class="literal">elseif</code> and <code class="literal">end</code></p></li><li class="listitem"><p><code class="literal">else</code> and <code class="literal">end</code></p></li></ul></div><p>In other words, a block is a <code class="literal">do</code> block (more about these in a moment), a loop, or a branch of an <code class="literal">if</code> statement. There are other blocks too, but these are the ones relevant to <code class="literal">break</code>. The following example demonstrates the error caused by trying to use <code class="literal">break</code> as something other than the last statement in a block:</p><pre class="programlisting">&gt; while true do
&gt;&gt;    break
&gt;&gt;    print("Never reached")
stdin:3: 'end' expected (to close 'while' at line 1) near 'print'</pre><p>This limitation is not a hardship, because even if you could put statements after a break, they would never get executed. During debugging, however, it can be convenient to break out of the middle of a block, and you can do this by wrapping the <code class="literal">break</code> in its own block. Lua's final compound statement, the <code class="literal">do</code> block, is useful for this, as you can see in the following example:</p><pre class="programlisting">&gt; for N = 1, 10 do
&gt;&gt;   print("Before")
&gt;&gt;   do break end
&gt;&gt;   print("After")
&gt;&gt; end
Before
&gt;</pre><p>The <code class="literal">do</code> block has the following form:</p><pre class="programlisting">do
  <em class="replaceable"><code>zero or more statements</code></em>
end</pre><p>It can also be used to force code typed directly into the interpreter to be executed as one unit, as in the second of the following examples, which, unlike the first, has all of its output in the same place, instead of it being interleaved with the code:</p><pre class="programlisting">&gt; print("\nHere are some numbers:")

Here are some numbers:
&gt; for N = 1, 5 do
&gt;&gt;   print(N)
&gt;&gt; end
1
2
3
4
5
&gt; print("There were some numbers.")
There were some numbers.

&gt; do
&gt;&gt;   print("\nHere are some numbers:")
&gt;&gt;   for N = 1, 5 do
&gt;&gt;     print(N)
&gt;&gt;   end
&gt;&gt;   print("There were some numbers.")
&gt;&gt; end

Here are some numbers:
1
2
3
4
5
There were some numbers.</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="summary-004"></a>Summary</h1></div></div></div><p>This chapter introduced you to the most fundamental elements of the Lua programming language. Most of the examples were given as typed into <code class="literal">lua</code>, the Lua interpreter. In this chapter, you learned the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Numbers, strings, Booleans, and <code class="literal">nil</code> are different types of values.</p></li><li class="listitem"><p>To print a value, use <code class="literal">print</code> and parentheses.</p></li><li class="listitem"><p>You can use operators to do math, compare values, concatenate strings, and do various other things with values.</p></li><li class="listitem"><p>Operators are applied in order of their precedence, but you can use parentheses to control this.</p></li><li class="listitem"><p>You use a single equal sign to assign a value to a variable.</p></li><li class="listitem"><p>Variable names (identifiers) must include only letters, digits, and underscores, and begin with a letter or an underscore. You cannot use keywords such as <code class="literal">and, true</code>, and <code class="literal">if</code> as variable names.</p></li><li class="listitem"><p>Comments start with two dashes.</p></li><li class="listitem"><p>Literal values and variables are expressions. You can build more complex expressions from less complex ones with operators and parentheses.</p></li><li class="listitem"><p>Statements are the smallest complete unit of Lua code.</p></li><li class="listitem"><p>To determine whether to do something, or how many times to do something, you use the control structures <code class="literal">if, for, while</code>, and <code class="literal">repeat</code>.</p></li></ul></div><p>Often in this chapter, you have given names to values using assignment. It's possible to give names to pieces of code too. For example, you can write a big <code class="literal">if</code> structure and give it a name, and then when you want to use it, you don't have to type the whole thing in again, you just need to type the name. Pieces of code that are nameable like this are called functions, and they're the subject of the next chapter. Before leaving this chapter, though, take some time to do the exercises and test your understanding of what you've learned so far. You'll find answers in the appendix.</p></div><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="exercises"></a>Exercises</h1></div></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Why does the following code give an error message rather than printing "Hello"?</p><pre class="programlisting">&gt; Print("Hello")
stdin:1: attempt to call global 'Print' (a nil value)
stack traceback:
       stdin:1: in main chunk
       [C]: ?</pre></li><li class="listitem"><p>Assuming <code class="literal">X</code> is <code class="literal">true</code> and <code class="literal">Y</code> is <code class="literal">nil</code>, what is the value of the following expression?</p><pre class="programlisting">(X and "ABC") .. (Y and "DEF" or 123)</pre></li><li class="listitem"><p>The expression from the previous exercise does not have a value if <code class="literal">X</code> is <code class="literal">false</code>. Why is that?</p></li><li class="listitem"><p>Consider the following <code class="literal">if</code> statement:</p><pre class="programlisting">if N &lt; 10 then
  print("x")
elseif N &gt; 0 then
  print("x")
end</pre><p>If <code class="literal">N</code> is <code class="literal">5</code>, how many x's will be printed?</p></li><li class="listitem"><p>Write a <code class="literal">for</code> loop that prints out the even numbers between 2 and 10, inclusive, in reverse order.</p></li></ol></div></div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Getting Situated</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. Extending Lua with Functions</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag">
        
        

        
          <p>You have 6 days left in your trial, Michaelschiner. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
        
        

      </div>

    
    



        
      </div>
      
        

<footer class="pagefoot t-pagefoot">
  <a href="ch02.html#" class="icon-up" onclick="window.Appcues.track('JumpTop_HeronBook')"><div class="visuallyhidden">Back to top</div></a>
  <ul class='js-footer-nav'>
  
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">&#169; 2021 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>

      
    
    <script src="https://learning.oreilly.com/jsi18n/web/" charset="utf-8"></script>
    <script src="https://learning.oreilly.com/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
